{"version":3,"sources":["common/constants.ts","common/format.ts","common/i18n.ts","list/DocumentTile.tsx","list/DocumentList.tsx","errors/ErrorAlerts.tsx","errors/ErrorPage.tsx","errors/ErrorBoundary.tsx","loading/LoadingPage.tsx","search/SearchInput.tsx","upload/UploadButton.tsx","common/firebase.ts","common/validations.ts","common/useDocuments.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["validFileTypes","formatFilesize","size","numeral","format","toLowerCase","i18n","use","initReactI18next","init","resources","en","translation","document","document_plural","filesize","upload","delete","lng","keySeparator","interpolation","escapeValue","value","lang","useStyles","makeStyles","theme","card","height","display","justifyContent","flexDirection","actions","alignItems","padding","spacing","name","textOverflow","DocumentTile","deleting","deleteDocument","t","useTranslation","classes","Grid","className","item","xs","md","Card","variant","CardHeader","title","CardActions","Typography","Button","color","startIcon","CircularProgress","disabled","onClick","totalSize","header","paddingTop","paddingBottom","DocumentList","documents","totalCount","length","reduce","doc","sortedDocuments","sort","a","b","localeCompare","id","container","justify","alignContent","component","count","map","d","includes","ErrorAlerts","errors","clearError","e","Snackbar","anchorOrigin","vertical","horizontal","open","message","autoHideDuration","onClose","page","ErrorPage","direction","window","location","reload","ErrorBoundary","state","hasError","error","errorInfo","this","props","children","React","Component","loading","LoadingPage","search","borderRadius","shape","borderColor","palette","grey","borderWidth","borderStyle","paddingRight","inputRoot","flexGrow","inputInput","SearchInput","onChange","getting","InputBase","placeholder","root","input","inputProps","target","button","textAlign","UploadButton","uploading","uploadDocument","accept","join","type","hidden","event","file","files","htmlFor","app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","documentsRef","storage","ref","child","searchFunction","functions","httpsCallable","searchDocuments","data","Promise","resolve","reject","put","on","TaskEvent","STATE_CHANGED","complete","validateFile","push","Error","initialState","reducer","action","documentName","filter","x","marginBottom","App","useState","setSearch","useReducer","dispatch","getDocuments","useDebouncedCallback","service","useCallback","validationErrors","Array","isArray","useEffect","callback","useDocuments","Container","maxWidth","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1ed9cd55.chunk.js","sourcesContent":["export const validFileTypes = [\"image/png\", \"image/jpeg\"];\nexport const maxFileSize = 10* 1000 * 1000; // 10 MB\nexport const filesizeFormat = \"0.0b\";\nexport const errorDisplayDuration = 10000; // 10s\nexport const searchDebounce = 500; // 0.5s\n","import numeral from \"numeral\";\nimport { filesizeFormat } from \"./constants\";\n\n// Format to lowercase to match designs\n// Normally, I would have raised this concern with design, \n// or follow company standards around displaying filesize.\nexport const formatFilesize = (size: number) =>\n  numeral(size).format(filesizeFormat).toLowerCase();\n","import i18n, { Resource } from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { formatFilesize } from \"./format\";\n\nconst resources: Resource = {\n  en: {\n    translation: {\n      document: \"{{count}} document\",\n      document_plural: \"{{count}} documents\",\n      filesize: \"{{filesize, filesize}}\",\n      \"total size\": \"Total size: {{totalSize, filesize}}\",\n      upload: \"UPLOAD\",\n      \"upload error\": \"Failed to upload file!\",\n      \"upload success\": \"Successfully uploaded '{{ filename }}'!\",\n      delete: \"Delete\",\n      \"search placeholder\": \"Search documents...\",\n      \"error title\": \"An error has occurred!\",\n      \"refresh\": \"Refresh\"\n    },\n  },\n};\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    lng: \"en\",\n\n    keySeparator: false, // we do not use keys in form messages.welcome\n\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n\n      format: (value, format, lang) => {\n        switch (format) {\n          case \"filesize\":\n            return formatFilesize(value);\n          default:\n            return value;\n        }\n      },\n    },\n  });\n\nexport default i18n;\n","import React from \"react\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardHeader,\n  CircularProgress,\n  Grid,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flexDirection: \"column\",\n  },\n  actions: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: theme.spacing(2),\n  },\n  filesize: {\n    alignItems: \"flex-end\",\n  },\n  name: {\n    textOverflow: \"ellipsis\",\n  },\n}));\n\nexport interface Props {\n  document: Document;\n  deleting: boolean;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentTile: React.FC<Props> = ({\n  document,\n  deleting,\n  deleteDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid className=\"Document-Tile\" item xs={12} md={4}>\n      <Card className={classes.card} variant=\"outlined\">\n        <CardHeader className={classes.name} title={document.name} />\n        <CardActions className={classes.actions}>\n          <Typography className={classes.filesize}>\n            {t(\"filesize\", { filesize: document.size })}\n          </Typography>\n          <Button\n            className=\"Delete-Button\"\n            size=\"small\"\n            color=\"primary\"\n            startIcon={deleting ? <CircularProgress size={14} /> : null}\n            disabled={deleting}\n            onClick={() => deleteDocument(document.name)}\n            variant=\"contained\"\n          >\n            {t(\"delete\")}\n          </Button>\n        </CardActions>\n      </Card>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\nimport { DocumentTile } from \"./DocumentTile\";\n\nconst useStyles = makeStyles((theme) => ({\n  totalSize: {\n    display: \"flex\",\n    alignItems: \"flex-end\",\n  },\n  header: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n  },\n}));\n\nexport interface Props {\n  documents: Array<Document>;\n  deleting: Array<string>;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentList: React.FC<Props> = ({\n  documents,\n  deleting,\n  deleteDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const totalCount = documents.length;\n  const totalSize = documents.reduce((size, doc) => size + doc.size, 0);\n  const sortedDocuments = documents.sort((a, b) =>\n    a.name.localeCompare(b.name)\n  );\n  return (\n    <>\n      <Grid\n        id=\"Document-List-Header\"\n        className={classes.header}\n        container\n        justify=\"space-between\"\n        alignContent=\"flex-end\"\n        spacing={2}\n      >\n        <Grid item>\n          <Typography\n            id=\"Document-List-Header-Count\"\n            variant=\"h3\"\n            component=\"h1\"\n          >\n            {t(\"document\", { count: totalCount })}\n          </Typography>\n        </Grid>\n        <Grid item className={classes.totalSize}>\n          <Typography id=\"Document-List-Header-Size\" variant=\"h5\">\n            {t(\"total size\", { totalSize })}\n          </Typography>\n        </Grid>\n      </Grid>\n      <Grid id=\"Document-List-Documents\" container spacing={2}>\n        {sortedDocuments.map((d) => (\n          <DocumentTile\n            key={d.name}\n            document={d}\n            deleting={deleting.includes(d.name)}\n            deleteDocument={deleteDocument}\n          />\n        ))}\n      </Grid>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Snackbar } from \"@material-ui/core\";\nimport { errorDisplayDuration } from \"../common/constants\";\n\nexport interface Props {\n  errors: Array<Error>;\n  clearError: (error: Error) => void;\n}\n\nexport const ErrorAlerts: React.FC<Props> = ({ errors, clearError }) => {\n  return (\n    <>\n      {errors.map((e) => (\n        <Snackbar\n          className=\"Document-Error\"\n          anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n          open={true}\n          message={e.message}\n          key={e.message}\n          autoHideDuration={errorDisplayDuration}\n          onClose={() => clearError(e)}\n        />\n      ))}\n    </>\n  );\n};\n","import React from \"react\";\nimport { Button, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    height: \"100vh\",\n  },\n}));\n\nexport const ErrorPage: React.FC = () => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid\n      id=\"Error-Page\"\n      className={classes.page}\n      container\n      alignItems=\"center\"\n      justify=\"center\"\n      direction=\"column\"\n    >\n      <Grid item>\n        <Typography variant=\"h3\" component=\"h1\">\n          {t(\"error title\")}\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => window.location.reload()}\n        >\n          {t(\"refresh\")}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { ErrorPage } from \"./ErrorPage\";\n\ninterface State {\n    hasError: boolean;\n}\n\nexport class ErrorBoundary extends React.Component<React.PropsWithChildren<{}>, State> {\n  state = { hasError: false };\n\n  static getDerivedStateFromError(error: any) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: any, errorInfo: React.ErrorInfo) {\n    // TODO log the error to a tracking servic\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { CircularProgress, Grid, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  loading: {\n    height: \"100vh\"\n  },\n}));\n\nexport const LoadingPage: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      className={classes.loading}\n    >\n      <CircularProgress />\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { CircularProgress, InputBase, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    borderRadius: theme.shape.borderRadius,\n    borderColor: theme.palette.grey[400],\n    borderWidth: 1,\n    borderStyle: \"solid\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    paddingRight: theme.spacing(1),\n  },\n  inputRoot: {\n    display: \"flex\",\n    flexGrow: 1,\n  },\n  inputInput: {\n    padding: theme.spacing(1),\n    display: \"block\",\n  },\n}));\n\ninterface Props {\n  value: string;\n  onChange: (search: string) => void;\n  getting: boolean;\n}\n\nexport const SearchInput: React.FC<Props> = ({ value, onChange, getting }) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <div className={classes.search}>\n      <InputBase\n        id=\"Document-Search\"\n        placeholder={t(\"search placeholder\")}\n        classes={{\n          root: classes.inputRoot,\n          input: classes.inputInput,\n        }}\n        inputProps={{ \"aria-label\": \"search\" }}\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n      />\n      {getting ? <CircularProgress size={24} /> : null}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Button, CircularProgress, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { validFileTypes } from \"../common/constants\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    display: \"flex\",\n    textAlign: \"center\",\n  },\n  input: {\n    display: \"none\",\n  },\n}));\n\nexport interface Props {\n  uploadDocument: (file: File) => void;\n  uploading: boolean;\n}\n\nexport const UploadButton: React.FC<Props> = ({\n  uploading,\n  uploadDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      uploadDocument(file);\n    }\n  };\n\n    /* <Snackbar\n        id=\"Upload-Success\"\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n        open={!!lastUploaded}\n        message={t(\"upload success\", { filename: lastUploaded })}\n        key=\"upload-success\"\n        autoHideDuration={errorDisplayDuration}\n        onClose={clearLastUploaded}\n      /> */\n\n  return (\n    <>\n      <input\n        id=\"Upload-Input\"\n        className={classes.input}\n        accept={validFileTypes.join(\", \")}\n        type=\"file\"\n        hidden\n        onChange={onChange}\n      />\n      <label htmlFor=\"Upload-Input\">\n        <Button\n          id=\"Upload-Button\"\n          variant=\"contained\"\n          className={classes.button}\n          component=\"div\"\n          disabled={uploading}\n          startIcon={uploading ? <CircularProgress size={14} /> : null}\n          color=\"primary\"\n        >\n          {t(\"Upload\")}\n        </Button>\n      </label>\n    </>\n  );\n};\n","import firebase from \"firebase/app\";\nimport \"firebase/storage\";\nimport \"firebase/functions\";\nimport { FunctionDocument } from \"./models\";\n\n// Set the configuration for your app\n// TODO move to a configuration file\n// TODO load different configuration based on environment\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA9eLEXFPMNIttFTlcZt6vImPOAaE9yPaA\",\n  authDomain: \"garrett-12-14-2020.firebaseapp.com\",\n  projectId: \"garrett-12-14-2020\",\n  storageBucket: \"garrett-12-14-2020.appspot.com\",\n  messagingSenderId: \"885719165107\",\n  appId: \"1:885719165107:web:71a5aa03311777029fa8c6\",\n};\nconst app = firebase.initializeApp(firebaseConfig);\n\n// Get a reference to the storage service, which is used to create references in your storage bucket\nconst storage = app.storage();\n\nconst storageRef = storage.ref();\nconst documentsRef = storageRef.child(\"documents\");\n\n// Get a reference to the functions service, which is use to call your cloud functions\nconst functions = app.functions();\n\nconst searchFunction = functions.httpsCallable(\"searchDocuments\");\n\nexport const searchDocuments = async (search: string) => {\n  const { data: documents } = await searchFunction(search);\n  // TODO validate response structure\n  return documents as Array<FunctionDocument>;\n};\n\nexport const deleteDocument = (name: string) =>\n  documentsRef.child(name).delete() as Promise<void>;\n\nexport const uploadDocument = (file: File) =>\n  new Promise<FunctionDocument>((resolve, reject) => {\n    const uploadTask = documentsRef.child(file.name).put(file);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, {\n      error: reject,\n      complete: () => resolve({ name: file.name, size: file.size }),\n    });\n  });\n","import { maxFileSize, validFileTypes } from \"./constants\";\nimport { formatFilesize } from \"./format\";\n\nexport const validateFile = (file: File) => {\n  const errors = [];\n\n  if (!validFileTypes.includes(file.type)) {\n    errors.push(new Error(`Invalid File Type: '${file.type}'`));\n  }\n\n  if (file.size > maxFileSize) {\n    errors.push(new Error(`File size too large: ${formatFilesize(file.size)}`));\n  }\n\n  return errors.length > 0 ? errors : null;\n};\n","import { useCallback, useEffect, useReducer } from \"react\";\nimport * as service from \"./firebase\";\nimport { searchDebounce } from \"./constants\";\nimport { validateFile } from \"./validations\";\nimport { Document } from \"./models\";\nimport useDebouncedCallback from \"use-debounce/lib/useDebouncedCallback\";\n\ninterface State {\n  getting: boolean;\n  uploading: boolean;\n  deleting: Array<string>;\n  documents: Array<Document> | null;\n  errors: Array<Error>;\n}\n\ntype Action =\n  | { type: \"get-start\"; search: string }\n  | { type: \"get-error\"; error: Error }\n  | { type: \"get-success\"; documents: Array<Document> }\n  | { type: \"upload-start\"; }\n  | { type: \"upload-error\"; errors: Array<Error> }\n  | { type: \"upload-success\"; document: Document }\n  | { type: \"delete-start\"; documentName: string }\n  | { type: \"delete-error\"; documentName: string; error: Error }\n  | { type: \"delete-success\"; documentName: string }\n  | { type: \"clear-error\"; error: Error };\n\nconst initialState: State = {\n  getting: false,\n  uploading: false,\n  deleting: [],\n  documents: null,\n  errors: [],\n};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"get-start\":\n      return {\n        ...state,\n        getting: true,\n      };\n    case \"get-error\":\n      return {\n        ...state,\n        getting: false,\n        errors: [ ...state.errors, action.error],\n      };\n    case \"get-success\":\n      return {\n        ...state,\n        getting: false,\n        documents: action.documents,\n      };\n\n    case \"upload-start\":\n      return {\n        ...state,\n        uploading: true,\n      };\n    case \"upload-error\":\n      return {\n        ...state,\n        uploading: false,\n        errors: [...state.errors, ...action.errors],\n      };\n    case \"upload-success\":\n      return {\n        ...state,\n        uploading: false,\n        documents: [...(state.documents ?? []), action.document],\n      };\n\n    case \"delete-start\":\n      return {\n        ...state,\n        deleting: [...state.deleting, action.documentName],\n      };\n    case \"delete-error\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        errors: [...state.errors, action.error],\n      };\n    case \"delete-success\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        documents: state.documents?.filter(\n          (x) => x.name !== action.documentName\n        ) ?? null,\n      };\n\n    case \"clear-error\":\n      return {\n        ...state,\n        errors: state.errors.filter((x) => x === action.error),\n      };\n\n    default:\n      throw new Error(`Unknown action`);\n  }\n};\n\nexport const useDocuments = (search: string) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const getDocuments = useDebouncedCallback(async (search: string) => {\n    dispatch({ type: \"get-start\", search });\n    try {\n      const documents = await service.searchDocuments(search);\n      dispatch({ type: \"get-success\", documents })\n    } catch (error) {\n      dispatch({ type: \"get-error\", error })\n    }\n  }, searchDebounce);\n\n  const uploadDocument = useCallback(async (file: File) => {\n    dispatch({ type: \"upload-start\" });\n    try {\n      const validationErrors = validateFile(file);\n      if (validationErrors) throw validationErrors;\n      const document = await service.uploadDocument(file);\n      dispatch({ type: \"upload-success\", document })\n    } catch (e) {\n      const errors = Array.isArray(e) ? e : [e];\n      dispatch({ type: \"upload-error\", errors })\n    }\n  }, [dispatch]);\n\n  const deleteDocument = useCallback(async (documentName: string) => {\n    dispatch({ type: \"delete-start\", documentName });\n    try {\n      await service.deleteDocument(documentName);\n      dispatch({ type: \"delete-success\", documentName });\n    } catch (error) {\n      dispatch({ type: \"delete-error\", documentName, error });\n    }\n  }, [dispatch]);\n\n  const clearError = useCallback(\n    (error: Error) => dispatch({ type: \"clear-error\", error }),\n    [dispatch]\n  );\n\n  useEffect(() => {\n    getDocuments.callback(search);\n  }, [search, getDocuments]);\n\n  return {\n    state,\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  };\n};\n","import React, { useState } from \"react\";\nimport { Container, Grid, makeStyles } from \"@material-ui/core\";\n\nimport { DocumentList } from \"./list/DocumentList\";\nimport { ErrorAlerts } from \"./errors/ErrorAlerts\";\nimport { ErrorBoundary } from \"./errors/ErrorBoundary\";\nimport { ErrorPage } from \"./errors/ErrorPage\";\nimport { LoadingPage } from \"./loading/LoadingPage\";\nimport { SearchInput } from \"./search/SearchInput\";\nimport { UploadButton } from \"./upload/UploadButton\";\nimport { useDocuments } from \"./common/useDocuments\";\n\nconst useStyles = makeStyles((theme) => ({\n  app: {\n    padding: theme.spacing(2),\n    height: \"100vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  actions: {\n    marginBottom: theme.spacing(1),\n  },\n}));\n\nexport const App: React.FC = () => {\n  const classes = useStyles();\n  const [search, setSearch] = useState(\"\");\n  const {\n    state: { getting, uploading, deleting, documents, errors },\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  } = useDocuments(search);\n\n  if (!documents && errors.length > 0) {\n    return <ErrorPage />;\n  } else if (!documents) {\n    return <LoadingPage />;\n  }\n\n  return (\n    <ErrorBoundary>\n      <ErrorAlerts errors={errors} clearError={clearError} />\n      <Container maxWidth=\"md\" className={classes.app}>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Grid item xs={12} md={2} className={classes.actions}>\n            <UploadButton\n              uploadDocument={uploadDocument}\n              uploading={uploading}\n            />\n          </Grid>\n          <Grid item xs={12} md={6} className={classes.actions}>\n            <SearchInput value={search} onChange={setSearch} getting={getting} />\n          </Grid>\n        </Grid>\n        <DocumentList\n          documents={documents ?? []}\n          deleting={deleting}\n          deleteDocument={deleteDocument}\n        />\n      </Container>\n    </ErrorBoundary>\n  );\n};\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./common/i18n\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}