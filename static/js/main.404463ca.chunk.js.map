{"version":3,"sources":["common/constants.ts","common/format.ts","common/i18n.ts","list/DocumentTile.tsx","list/DocumentList.tsx","errors/ErrorAlerts.tsx","errors/ErrorPage.tsx","errors/ErrorBoundary.tsx","loading/LoadingPage.tsx","search/SearchInput.tsx","upload/UploadButton.tsx","common/firebase.ts","common/validations.ts","common/useDocuments.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["validFileTypes","formatFilesize","size","numeral","format","toLowerCase","i18n","use","initReactI18next","init","resources","en","translation","document","document_plural","filesize","upload","delete","lng","keySeparator","interpolation","escapeValue","value","lang","useStyles","makeStyles","theme","card","height","display","justifyContent","flexDirection","actions","alignItems","DocumentTile","deleting","deleteDocument","t","useTranslation","classes","Grid","className","item","xs","md","Card","variant","CardHeader","title","name","CardActions","Typography","Button","color","startIcon","CircularProgress","disabled","onClick","totalSize","header","paddingTop","spacing","paddingBottom","DocumentList","documents","totalCount","length","reduce","doc","sortedDocuments","sort","a","b","localeCompare","id","container","justify","alignContent","variantMapping","h3","count","map","d","includes","ErrorAlerts","errors","clearError","e","Snackbar","anchorOrigin","vertical","horizontal","open","message","autoHideDuration","onClose","page","ErrorPage","direction","window","location","reload","ErrorBoundary","state","hasError","error","errorInfo","this","props","children","React","Component","loading","LoadingPage","search","borderRadius","shape","borderColor","palette","grey","borderWidth","borderStyle","paddingRight","inputRoot","flexGrow","inputInput","padding","SearchInput","onChange","getting","InputBase","placeholder","root","input","inputProps","target","button","textAlign","UploadButton","uploading","uploadDocument","accept","join","type","hidden","event","file","files","htmlFor","component","app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","documentsRef","storage","ref","child","searchFunction","functions","httpsCallable","searchDocuments","data","Promise","resolve","reject","put","on","TaskEvent","STATE_CHANGED","complete","validateFile","push","Error","initialState","reducer","action","documentName","filter","x","marginBottom","App","useState","setSearch","useReducer","dispatch","getDocuments","useDebouncedCallback","service","useCallback","validationErrors","Array","isArray","useEffect","callback","useDocuments","Container","maxWidth","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.404463ca.chunk.js","sourcesContent":["export const validFileTypes = [\"image/png\", \"image/jpeg\"];\nexport const maxFileSize = 1000 * 1000; // 10 MB\nexport const filesizeFormat = \"0.0b\";\nexport const errorDisplayDuration = 10000; // 10s\nexport const searchDebounce = 500; // 0.5s\n","import numeral from \"numeral\";\nimport { filesizeFormat } from \"./constants\";\n\n// Format to lowercase to match designs\n// Normally, I would have raised this concern with design, \n// or follow company standards around displaying filesize.\nexport const formatFilesize = (size: number) =>\n  numeral(size).format(filesizeFormat).toLowerCase();\n","import i18n, { Resource } from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { formatFilesize } from \"./format\";\n\nconst resources: Resource = {\n  en: {\n    translation: {\n      document: \"{{count}} document\",\n      document_plural: \"{{count}} documents\",\n      filesize: \"{{filesize, filesize}}\",\n      \"total size\": \"Total size: {{totalSize, filesize}}\",\n      upload: \"UPLOAD\",\n      \"upload error\": \"Failed to upload file!\",\n      \"upload success\": \"Successfully uploaded '{{ filename }}'!\",\n      delete: \"Delete\",\n      \"search placeholder\": \"Search documents...\",\n      \"error title\": \"An error has occurred!\",\n      \"refresh\": \"Refresh\"\n    },\n  },\n};\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    lng: \"en\",\n\n    keySeparator: false, // we do not use keys in form messages.welcome\n\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n\n      format: (value, format, lang) => {\n        switch (format) {\n          case \"filesize\":\n            return formatFilesize(value);\n          default:\n            return value;\n        }\n      },\n    },\n  });\n\nexport default i18n;\n","import React from \"react\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardHeader,\n  CircularProgress,\n  Grid,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flexDirection: \"column\",\n  },\n  actions: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  filesize: {\n    alignItems: \"flex-end\",\n  },\n}));\n\nexport interface Props {\n  document: Document;\n  deleting: boolean;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentTile: React.FC<Props> = ({\n  document,\n  deleting,\n  deleteDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid className=\"Document-Tile\" item xs={12} md={4}>\n      <Card className={classes.card} variant=\"outlined\">\n        <CardHeader title={document.name} />\n        <CardActions className={classes.actions}>\n          <Typography className={classes.filesize}>\n            {t(\"filesize\", { filesize: document.size })}\n          </Typography>\n          <Button\n            className=\"Delete-Button\"\n            size=\"small\"\n            color=\"primary\"\n            startIcon={deleting ? <CircularProgress size={14} /> : null}\n            disabled={deleting}\n            onClick={() => deleteDocument(document.name)}\n            variant=\"contained\"\n          >\n            {t(\"delete\")}\n          </Button>\n        </CardActions>\n      </Card>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\nimport { DocumentTile } from \"./DocumentTile\";\n\nconst useStyles = makeStyles((theme) => ({\n  totalSize: {\n    display: \"flex\",\n    alignItems: \"flex-end\",\n  },\n  header: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n  },\n}));\n\nexport interface Props {\n  documents: Array<Document>;\n  deleting: Array<string>;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentList: React.FC<Props> = ({\n  documents,\n  deleting,\n  deleteDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const totalCount = documents.length;\n  const totalSize = documents.reduce((size, doc) => size + doc.size, 0);\n  const sortedDocuments = documents.sort((a, b) =>\n    a.name.localeCompare(b.name)\n  );\n  return (\n    <>\n      <Grid\n        id=\"Document-List-Header\"\n        className={classes.header}\n        container\n        justify=\"space-between\"\n        alignContent=\"flex-end\"\n      >\n        <Grid item>\n          <Typography\n            id=\"Document-List-Header-Count\"\n            variant=\"h3\"\n            variantMapping={{ h3: \"h1\" }}\n          >\n            {t(\"document\", { count: totalCount })}\n          </Typography>\n        </Grid>\n        <Grid item className={classes.totalSize}>\n          <Typography id=\"Document-List-Header-Size\" variant=\"h5\">\n            {t(\"total size\", { totalSize })}\n          </Typography>\n        </Grid>\n      </Grid>\n      <Grid id=\"Document-List-Documents\" container spacing={2}>\n        {sortedDocuments.map((d) => (\n          <DocumentTile\n            key={d.name}\n            document={d}\n            deleting={deleting.includes(d.name)}\n            deleteDocument={deleteDocument}\n          />\n        ))}\n      </Grid>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Snackbar } from \"@material-ui/core\";\nimport { errorDisplayDuration } from \"../common/constants\";\n\nexport interface Props {\n  errors: Array<Error>;\n  clearError: (error: Error) => void;\n}\n\nexport const ErrorAlerts: React.FC<Props> = ({ errors, clearError }) => {\n  return (\n    <>\n      {errors.map((e) => (\n        <Snackbar\n          className=\"Document-Error\"\n          anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n          open={true}\n          message={e.message}\n          key={e.message}\n          autoHideDuration={errorDisplayDuration}\n          onClose={() => clearError(e)}\n        />\n      ))}\n    </>\n  );\n};\n","import React from \"react\";\nimport { Button, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    height: \"100vh\",\n  },\n}));\n\nexport const ErrorPage: React.FC = () => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid\n      id=\"Error-Page\"\n      className={classes.page}\n      container\n      alignItems=\"center\"\n      justify=\"center\"\n      direction=\"column\"\n    >\n      <Grid item>\n        <Typography variant=\"h3\" variantMapping={{ h3: \"h1\" }}>\n          {t(\"error title\")}\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => window.location.reload()}\n        >\n          {t(\"refresh\")}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { ErrorPage } from \"./ErrorPage\";\n\ninterface State {\n    hasError: boolean;\n}\n\nexport class ErrorBoundary extends React.Component<React.PropsWithChildren<{}>, State> {\n  state = { hasError: false };\n\n  static getDerivedStateFromError(error: any) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: any, errorInfo: React.ErrorInfo) {\n    // TODO log the error to a tracking servic\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { CircularProgress, Grid, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  loading: {\n    height: \"100vh\"\n  },\n}));\n\nexport const LoadingPage: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      className={classes.loading}\n    >\n      <CircularProgress />\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { CircularProgress, InputBase, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    borderRadius: theme.shape.borderRadius,\n    borderColor: theme.palette.grey[400],\n    borderWidth: 1,\n    borderStyle: \"solid\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    paddingRight: theme.spacing(1),\n  },\n  inputRoot: {\n    display: \"flex\",\n    flexGrow: 1,\n  },\n  inputInput: {\n    padding: theme.spacing(1),\n    display: \"block\",\n  },\n}));\n\ninterface Props {\n  value: string;\n  onChange: (search: string) => void;\n  getting: boolean;\n}\n\nexport const SearchInput: React.FC<Props> = ({ value, onChange, getting }) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <div className={classes.search}>\n      <InputBase\n        id=\"Document-Search\"\n        placeholder={t(\"search placeholder\")}\n        classes={{\n          root: classes.inputRoot,\n          input: classes.inputInput,\n        }}\n        inputProps={{ \"aria-label\": \"search\" }}\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n      />\n      {getting ? <CircularProgress size={24} /> : null}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Button, CircularProgress, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { validFileTypes } from \"../common/constants\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    display: \"flex\",\n    textAlign: \"center\",\n  },\n  input: {\n    display: \"none\",\n  },\n}));\n\nexport interface Props {\n  uploadDocument: (file: File) => void;\n  uploading: boolean;\n}\n\nexport const UploadButton: React.FC<Props> = ({\n  uploading,\n  uploadDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      uploadDocument(file);\n    }\n  };\n\n    /* <Snackbar\n        id=\"Upload-Success\"\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n        open={!!lastUploaded}\n        message={t(\"upload success\", { filename: lastUploaded })}\n        key=\"upload-success\"\n        autoHideDuration={errorDisplayDuration}\n        onClose={clearLastUploaded}\n      /> */\n\n  return (\n    <>\n      <input\n        id=\"Upload-Input\"\n        className={classes.input}\n        accept={validFileTypes.join(\", \")}\n        type=\"file\"\n        hidden\n        onChange={onChange}\n      />\n      <label htmlFor=\"Upload-Input\">\n        <Button\n          id=\"Upload-Button\"\n          variant=\"contained\"\n          className={classes.button}\n          component=\"div\"\n          disabled={uploading}\n          startIcon={uploading ? <CircularProgress size={14} /> : null}\n          color=\"primary\"\n        >\n          {t(\"Upload\")}\n        </Button>\n      </label>\n    </>\n  );\n};\n","import firebase from \"firebase/app\";\nimport \"firebase/storage\";\nimport \"firebase/functions\";\nimport { FunctionDocument } from \"./models\";\n\n// Set the configuration for your app\n// TODO move to a configuration file\n// TODO load different configuration based on environment\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA9eLEXFPMNIttFTlcZt6vImPOAaE9yPaA\",\n  authDomain: \"garrett-12-14-2020.firebaseapp.com\",\n  projectId: \"garrett-12-14-2020\",\n  storageBucket: \"garrett-12-14-2020.appspot.com\",\n  messagingSenderId: \"885719165107\",\n  appId: \"1:885719165107:web:71a5aa03311777029fa8c6\",\n};\nconst app = firebase.initializeApp(firebaseConfig);\n\n// Get a reference to the storage service, which is used to create references in your storage bucket\nconst storage = app.storage();\n\nconst storageRef = storage.ref();\nconst documentsRef = storageRef.child(\"documents\");\n\n// Get a reference to the functions service, which is use to call your cloud functions\nconst functions = app.functions();\n\nconst searchFunction = functions.httpsCallable(\"searchDocuments\");\n\nexport const searchDocuments = async (search: string) => {\n  const { data: documents } = await searchFunction(search);\n  // TODO validate response structure\n  return documents as Array<FunctionDocument>;\n};\n\nexport const deleteDocument = (name: string) =>\n  documentsRef.child(name).delete() as Promise<void>;\n\nexport const uploadDocument = (file: File) =>\n  new Promise<FunctionDocument>((resolve, reject) => {\n    const uploadTask = documentsRef.child(file.name).put(file);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, {\n      error: reject,\n      complete: () => resolve({ name: file.name, size: file.size }),\n    });\n  });\n","import { maxFileSize, validFileTypes } from \"./constants\";\nimport { formatFilesize } from \"./format\";\n\nexport const validateFile = (file: File) => {\n  const errors = [];\n\n  if (!validFileTypes.includes(file.type)) {\n    errors.push(new Error(`Invalid File Type: '${file.type}'`));\n  }\n\n  if (file.size > maxFileSize) {\n    errors.push(new Error(`File size too large: ${formatFilesize(file.size)}`));\n  }\n\n  return errors.length > 0 ? errors : null;\n};\n","import { useCallback, useEffect, useReducer } from \"react\";\nimport * as service from \"./firebase\";\nimport { searchDebounce } from \"./constants\";\nimport { validateFile } from \"./validations\";\nimport { Document } from \"./models\";\nimport useDebouncedCallback from \"use-debounce/lib/useDebouncedCallback\";\n\ninterface State {\n  getting: boolean;\n  uploading: boolean;\n  deleting: Array<string>;\n  documents: Array<Document> | null;\n  errors: Array<Error>;\n}\n\ntype Action =\n  | { type: \"get-start\"; search: string }\n  | { type: \"get-error\"; error: Error }\n  | { type: \"get-success\"; documents: Array<Document> }\n  | { type: \"upload-start\"; }\n  | { type: \"upload-error\"; errors: Array<Error> }\n  | { type: \"upload-success\"; document: Document }\n  | { type: \"delete-start\"; documentName: string }\n  | { type: \"delete-error\"; documentName: string; error: Error }\n  | { type: \"delete-success\"; documentName: string }\n  | { type: \"clear-error\"; error: Error };\n\nconst initialState: State = {\n  getting: false,\n  uploading: false,\n  deleting: [],\n  documents: null,\n  errors: [],\n};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"get-start\":\n      return {\n        ...state,\n        getting: true,\n      };\n    case \"get-error\":\n      return {\n        ...state,\n        getting: false,\n        errors: [ ...state.errors, action.error],\n      };\n    case \"get-success\":\n      return {\n        ...state,\n        getting: false,\n        documents: action.documents,\n      };\n\n    case \"upload-start\":\n      return {\n        ...state,\n        uploading: true,\n      };\n    case \"upload-error\":\n      return {\n        ...state,\n        uploading: false,\n        errors: [...state.errors, ...action.errors],\n      };\n    case \"upload-success\":\n      return {\n        ...state,\n        uploading: false,\n        documents: [...(state.documents ?? []), action.document],\n      };\n\n    case \"delete-start\":\n      return {\n        ...state,\n        deleting: [...state.deleting, action.documentName],\n      };\n    case \"delete-error\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        errors: [...state.errors, action.error],\n      };\n    case \"delete-success\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        documents: state.documents?.filter(\n          (x) => x.name !== action.documentName\n        ) ?? null,\n      };\n\n    case \"clear-error\":\n      return {\n        ...state,\n        errors: state.errors.filter((x) => x === action.error),\n      };\n\n    default:\n      throw new Error(`Unknown action`);\n  }\n};\n\nexport const useDocuments = (search: string) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const getDocuments = useDebouncedCallback(async (search: string) => {\n    dispatch({ type: \"get-start\", search });\n    try {\n      const documents = await service.searchDocuments(search);\n      dispatch({ type: \"get-success\", documents })\n    } catch (error) {\n      dispatch({ type: \"get-error\", error })\n    }\n  }, searchDebounce);\n\n  const uploadDocument = useCallback(async (file: File) => {\n    dispatch({ type: \"upload-start\" });\n    try {\n      const validationErrors = validateFile(file);\n      if (validationErrors) throw validationErrors;\n      const document = await service.uploadDocument(file);\n      dispatch({ type: \"upload-success\", document })\n    } catch (e) {\n      const errors = Array.isArray(e) ? e : [e];\n      dispatch({ type: \"upload-error\", errors })\n    }\n  }, [dispatch]);\n\n  const deleteDocument = useCallback(async (documentName: string) => {\n    dispatch({ type: \"delete-start\", documentName });\n    try {\n      await service.deleteDocument(documentName);\n      dispatch({ type: \"delete-success\", documentName });\n    } catch (error) {\n      dispatch({ type: \"delete-error\", documentName, error });\n    }\n  }, [dispatch]);\n\n  const clearError = useCallback(\n    (error: Error) => dispatch({ type: \"clear-error\", error }),\n    [dispatch]\n  );\n\n  useEffect(() => {\n    getDocuments.callback(search);\n  }, [search, getDocuments]);\n\n  return {\n    state,\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  };\n};\n","import React, { useState } from \"react\";\nimport { Container, Grid, makeStyles } from \"@material-ui/core\";\n\nimport { DocumentList } from \"./list/DocumentList\";\nimport { ErrorAlerts } from \"./errors/ErrorAlerts\";\nimport { ErrorBoundary } from \"./errors/ErrorBoundary\";\nimport { ErrorPage } from \"./errors/ErrorPage\";\nimport { LoadingPage } from \"./loading/LoadingPage\";\nimport { SearchInput } from \"./search/SearchInput\";\nimport { UploadButton } from \"./upload/UploadButton\";\nimport { useDocuments } from \"./common/useDocuments\";\n\nconst useStyles = makeStyles((theme) => ({\n  app: {\n    padding: theme.spacing(2),\n    height: \"100vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  actions: {\n    marginBottom: theme.spacing(1),\n  },\n}));\n\nexport const App: React.FC = () => {\n  const classes = useStyles();\n  const [search, setSearch] = useState(\"\");\n  const {\n    state: { getting, uploading, deleting, documents, errors },\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  } = useDocuments(search);\n\n  if (!documents && errors.length > 0) {\n    return <ErrorPage />;\n  } else if (!documents) {\n    return <LoadingPage />;\n  }\n\n  return (\n    <ErrorBoundary>\n      <ErrorAlerts errors={errors} clearError={clearError} />\n      <Container maxWidth=\"md\" className={classes.app}>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Grid item xs={12} md={2} className={classes.actions}>\n            <UploadButton\n              uploadDocument={uploadDocument}\n              uploading={uploading}\n            />\n          </Grid>\n          <Grid item xs={12} md={6} className={classes.actions}>\n            <SearchInput value={search} onChange={setSearch} getting={getting} />\n          </Grid>\n        </Grid>\n        <DocumentList\n          documents={documents ?? []}\n          deleting={deleting}\n          deleteDocument={deleteDocument}\n        />\n      </Container>\n    </ErrorBoundary>\n  );\n};\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./common/i18n\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}