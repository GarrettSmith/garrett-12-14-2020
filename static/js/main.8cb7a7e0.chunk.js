(this["webpackJsonpgarrett-12-14-2020"]=this["webpackJsonpgarrett-12-14-2020"]||[]).push([[0],{70:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),i=n(18),o=n.n(i),s=(n(70),n(45)),u=n(37),l=n(48),d=n.n(l),p=["image/png","image/jpeg"],j=function(e){return d()(e).format("0.0b").toLowerCase()};s.a.use(u.e).init({resources:{en:{translation:{document:"{{count}} document",document_plural:"{{count}} documents",filesize:"{{filesize, filesize}}","total size":"Total size: {{totalSize, filesize}}",upload:"UPLOAD","upload error":"Failed to upload file!","upload success":"Successfully uploaded '{{ filename }}'!",delete:"Delete","search placeholder":"Search documents...","error title":"An error has occurred!",refresh:"Refresh"}}},lng:"en",keySeparator:!1,interpolation:{escapeValue:!1,format:function(e,t,n){switch(t){case"filesize":return j(e);default:return e}}}});s.a;var m=n(42),b=n(104),h=n(114),f=n(106),g=n(110),O=n(118),x=n(107),v=n(108),y=n(109),w=n(111),z=n(115),D=n(112),N=n(113),k=Object(b.a)((function(e){return{card:{height:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column"},actions:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2)},filesize:{alignItems:"flex-end"},name:{textOverflow:"ellipsis"},button:{paddingRight:e.spacing(4)}}})),C=function(e){var t=e.document,n=e.deleting,a=e.deleteDocument,c=Object(O.a)().t,i=k();return Object(r.jsx)(f.a,{className:"Document-Tile",item:!0,xs:12,md:4,children:Object(r.jsx)(x.a,{in:!0,children:Object(r.jsxs)(v.a,{className:i.card,variant:"outlined",children:[Object(r.jsx)(y.a,{children:Object(r.jsx)(g.a,{className:i.name,noWrap:!0,gutterBottom:!0,variant:"h5",component:"h2",children:t.name})}),Object(r.jsxs)(w.a,{className:i.actions,children:[Object(r.jsx)(g.a,{className:i.filesize,children:c("filesize",{filesize:t.size})}),Object(r.jsx)(z.a,{className:"Delete-Button ".concat(i.button),size:"small",color:"primary",startIcon:Object(r.jsx)(D.a,{in:n,children:Object(r.jsx)(N.a,{size:14})}),disabled:n,onClick:function(){return a(t.name)},variant:"contained",children:c("delete")})]})]})})})},I=Object(b.a)((function(e){return{totalSize:{display:"flex",alignItems:"flex-end"},header:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}}})),E=function(e){var t=e.documents,n=e.deleting,a=e.deleteDocument,c=Object(O.a)().t,i=I(),o=t.length,s=t.reduce((function(e,t){return e+t.size}),0),u=t.sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(f.a,{id:"Document-List-Header",className:i.header,container:!0,justify:"space-between",alignContent:"flex-end",spacing:2,children:[Object(r.jsx)(f.a,{item:!0,children:Object(r.jsx)(g.a,{id:"Document-List-Header-Count",variant:"h3",component:"h1",children:c("document",{count:o})})}),Object(r.jsx)(f.a,{item:!0,className:i.totalSize,children:Object(r.jsx)(g.a,{id:"Document-List-Header-Size",variant:"h5",children:c("total size",{totalSize:s})})})]}),Object(r.jsx)(f.a,{id:"Document-List-Documents",container:!0,spacing:2,children:u.map((function(e){return Object(r.jsx)(C,{document:e,deleting:n.includes(e.name),deleteDocument:a},e.name)}))})]})},S=n(117),F=function(e){var t=e.errors,n=e.clearError;return Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsx)(S.a,{className:"Document-Error",anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!0,message:e.message,autoHideDuration:1e4,onClose:function(){return n(e)}},e.message)}))})},A=n(56),T=n(57),L=n(60),P=n(59),R=Object(b.a)((function(e){return{page:{height:"100vh"}}})),B=function(){var e=Object(O.a)().t,t=R();return Object(r.jsxs)(f.a,{id:"Error-Page",className:t.page,container:!0,alignItems:"center",justify:"center",direction:"column",children:[Object(r.jsx)(f.a,{item:!0,children:Object(r.jsx)(g.a,{variant:"h3",component:"h1",children:e("error title")})}),Object(r.jsx)(f.a,{item:!0,children:Object(r.jsx)(z.a,{variant:"contained",color:"primary",onClick:function(){return window.location.reload()},children:e("refresh")})})]})},U=function(e){Object(L.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(A.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(T.a)(n,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)(B,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(c.a.Component),H=Object(b.a)((function(e){return{loading:{height:"100vh"}}})),W=function(){var e=H();return Object(r.jsx)(f.a,{container:!0,justify:"center",alignItems:"center",className:e.loading,children:Object(r.jsx)(D.a,{in:!0,children:Object(r.jsx)(N.a,{})})})},G=n(116),J=Object(b.a)((function(e){return{search:{borderRadius:e.shape.borderRadius,borderColor:e.palette.grey[400],borderWidth:1,borderStyle:"solid",display:"flex",flexDirection:"row",alignItems:"center",paddingRight:e.spacing(1)},inputRoot:{display:"flex",flexGrow:1},inputInput:{padding:e.spacing(1),display:"block"}}})),_=function(e){var t=e.value,n=e.onChange,a=e.getting,c=Object(O.a)().t,i=J();return Object(r.jsxs)("div",{className:i.search,children:[Object(r.jsx)(G.a,{id:"Document-Search",placeholder:c("search placeholder"),classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return n(e.target.value)},value:t}),Object(r.jsx)(x.a,{in:a,children:Object(r.jsx)(N.a,{size:24})})]})},K=Object(b.a)((function(e){return{button:{display:"flex",textAlign:"center",paddingRight:e.spacing(4)},input:{display:"none"}}})),M=function(e){var t=e.uploading,n=e.uploadDocument,a=Object(O.a)().t,c=K();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{id:"Upload-Input",className:c.input,accept:p.join(", "),type:"file",hidden:!0,onChange:function(e){var t,r=null===(t=e.target.files)||void 0===t?void 0:t[0];e.target.value="",r&&n(r)}}),Object(r.jsx)("label",{htmlFor:"Upload-Input",children:Object(r.jsx)(z.a,{id:"Upload-Button",variant:"contained",className:c.button,component:"div",disabled:t,startIcon:Object(r.jsx)(D.a,{in:t,children:Object(r.jsx)(N.a,{size:14})}),color:"primary",children:a("Upload")})})]})},V=n(21),X=n.n(V),Z=n(33),q=n(26),Q=n(9),Y=n(44),$=(n(83),n(84),Y.a.initializeApp({apiKey:"AIzaSyA9eLEXFPMNIttFTlcZt6vImPOAaE9yPaA",authDomain:"garrett-12-14-2020.firebaseapp.com",projectId:"garrett-12-14-2020",storageBucket:"garrett-12-14-2020.appspot.com",messagingSenderId:"885719165107",appId:"1:885719165107:web:71a5aa03311777029fa8c6"})),ee=$.storage().ref().child("documents"),te=$.functions().httpsCallable("searchDocuments"),ne=function(){var e=Object(Z.a)(X.a.mark((function e(t){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){return new Promise((function(t,n){ee.child(e.name).put(e).on(Y.a.storage.TaskEvent.STATE_CHANGED,{error:n,complete:function(){return t({name:e.name,size:e.size})}})}))},ae=function(e){var t=[];return p.includes(e.type)||t.push(new Error("Invalid File Type: '".concat(e.type,"'"))),e.size>1e7&&t.push(new Error("File size too large: ".concat(j(e.size)))),t.length>0?t:null},ce=n(58),ie=n.n(ce),oe={getting:!1,uploading:!1,deleting:[],documents:null,errors:[]},se=function(e,t){var n,r,a;switch(t.type){case"get-start":return Object(Q.a)(Object(Q.a)({},e),{},{getting:!0});case"get-error":return Object(Q.a)(Object(Q.a)({},e),{},{getting:!1,errors:[].concat(Object(q.a)(e.errors),[t.error])});case"get-success":return Object(Q.a)(Object(Q.a)({},e),{},{getting:!1,documents:t.documents});case"upload-start":return Object(Q.a)(Object(Q.a)({},e),{},{uploading:!0});case"upload-error":return Object(Q.a)(Object(Q.a)({},e),{},{uploading:!1,errors:[].concat(Object(q.a)(e.errors),Object(q.a)(t.errors))});case"upload-success":return Object(Q.a)(Object(Q.a)({},e),{},{uploading:!1,documents:[].concat(Object(q.a)(e.documents||[]),Object(q.a)((null===(n=e.documents)||void 0===n?void 0:n.find((function(e){return e.name===t.document.name})))?[]:[t.document]))});case"delete-start":return Object(Q.a)(Object(Q.a)({},e),{},{deleting:[].concat(Object(q.a)(e.deleting),[t.documentName])});case"delete-error":return Object(Q.a)(Object(Q.a)({},e),{},{deleting:e.deleting.filter((function(e){return e!==t.documentName})),errors:[].concat(Object(q.a)(e.errors),[t.error])});case"delete-success":return Object(Q.a)(Object(Q.a)({},e),{},{deleting:e.deleting.filter((function(e){return e!==t.documentName})),documents:null!==(r=null===(a=e.documents)||void 0===a?void 0:a.filter((function(e){return e.name!==t.documentName})))&&void 0!==r?r:null});case"clear-error":return Object(Q.a)(Object(Q.a)({},e),{},{errors:e.errors.filter((function(e){return e!==t.error}))});default:throw new Error("Unknown action")}},ue=Object(b.a)((function(e){return{app:{padding:e.spacing(2),height:"100vh",display:"flex",flexDirection:"column"},actions:{marginBottom:e.spacing(1)}}})),le=function(){var e=ue(),t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],i=n[1],o=function(e){var t=Object(a.useReducer)(se,oe),n=Object(m.a)(t,2),r=n[0],c=n[1],i=ie()(function(){var e=Object(Z.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"get-start",search:t}),e.prev=1,e.next=4,ne(t);case 4:n=e.sent,c({type:"get-success",documents:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"get-error",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),500),o=Object(a.useCallback)(function(){var e=Object(Z.a)(X.a.mark((function e(t){var n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c({type:"upload-start"}),e.prev=1,!(n=ae(t))){e.next=5;break}throw n;case 5:return e.next=7,re(t);case 7:r=e.sent,c({type:"upload-success",document:r}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),a=Array.isArray(e.t0)?e.t0:[e.t0],c({type:"upload-error",errors:a});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),[c]),s=Object(a.useCallback)(function(){var e=Object(Z.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"delete-start",documentName:t}),e.prev=1,e.next=4,n=t,ee.child(n).delete();case 4:c({type:"delete-success",documentName:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c({type:"delete-error",documentName:t,error:e.t0});case 10:case"end":return e.stop()}var n}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[c]),u=Object(a.useCallback)((function(e){return c({type:"clear-error",error:e})}),[c]);return Object(a.useEffect)((function(){i.callback(e)}),[e,i]),{state:r,uploadDocument:o,deleteDocument:s,clearError:u}}(c),s=o.state,u=s.getting,l=s.uploading,d=s.deleting,p=s.documents,j=s.errors,b=o.uploadDocument,g=o.deleteDocument,O=o.clearError;return!p&&j.length>0?Object(r.jsx)(B,{}):p?Object(r.jsxs)(U,{children:[Object(r.jsx)(F,{errors:j,clearError:O}),Object(r.jsxs)(h.a,{maxWidth:"md",className:e.app,children:[Object(r.jsxs)(f.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(r.jsx)(f.a,{item:!0,xs:12,md:2,className:e.actions,children:Object(r.jsx)(M,{uploadDocument:b,uploading:l})}),Object(r.jsx)(f.a,{item:!0,xs:12,md:6,className:e.actions,children:Object(r.jsx)(_,{value:c,onChange:i,getting:u})})]}),Object(r.jsx)(E,{documents:null!==p&&void 0!==p?p:[],deleting:d,deleteDocument:g})]})]}):Object(r.jsx)(W,{})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(le,{}),document.getElementById("root")),de()}},[[82,1,2]]]);
//# sourceMappingURL=main.8cb7a7e0.chunk.js.map