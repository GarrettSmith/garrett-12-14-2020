(this["webpackJsonpgarrett-12-14-2020"]=this["webpackJsonpgarrett-12-14-2020"]||[]).push([[0],{70:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),i=n(18),o=n.n(i),s=(n(70),n(45)),u=n(38),l=n(48),d=n.n(l),p=["image/png","image/jpeg"],j=function(e){return d()(e).format("0.0b").toLowerCase()};s.a.use(u.e).init({resources:{en:{translation:{document:"{{count}} document",document_plural:"{{count}} documents",filesize:"{{filesize, filesize}}","total size":"Total size: {{totalSize, filesize}}",upload:"UPLOAD","upload error":"Failed to upload file!","upload success":"Successfully uploaded '{{ filename }}'!",delete:"Delete","search placeholder":"Search documents...","error title":"An error has occurred!",refresh:"Refresh"}}},lng:"en",keySeparator:!1,interpolation:{escapeValue:!1,format:function(e,t,n){switch(t){case"filesize":return j(e);default:return e}}}});s.a;var m=n(30),b=n(104),g=n(115),f=n(106),h=n(111),O=n(119),x=n(107),v=n(108),y=n(109),w=n(110),z=n(112),D=n(116),N=n(113),k=n(114),C=Object(b.a)((function(e){return{card:{height:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",backgroundPosition:"center",backgroundSize:"cover"},actions:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2)},filesize:{alignItems:"flex-end"},name:{textOverflow:"ellipsis"},button:{paddingRight:e.spacing(4)},media:{paddingTop:"60%"},image:{display:"none",visibility:"hidden",width:0,height:0}}})),E=function(e){var t=e.document,n=e.deleting,c=e.deleteDocument,i=Object(a.useState)(!1),o=Object(m.a)(i,2),s=o[0],u=o[1],l=Object(a.useRef)(null),d=function(){return u(!0)};Object(a.useEffect)((function(){var e=l.current;if(e)return e.addEventListener("load",d),function(){return e.removeEventListener("load",d)}}),[l]);var p="https://firebasestorage.googleapis.com/v0/b/garrett-12-14-2020.appspot.com/o/documents%2F".concat(t.name,"?alt=media"),j=Object(O.a)().t,b=C();return Object(r.jsx)(f.a,{className:"Document-Tile",item:!0,xs:12,md:4,children:Object(r.jsx)(x.a,{in:!0,children:Object(r.jsxs)(v.a,{className:b.card,variant:"outlined",children:[Object(r.jsx)(x.a,{in:s,children:Object(r.jsx)(y.a,{className:b.media,image:p,title:t.name,children:Object(r.jsx)("img",{src:p,className:b.image,ref:l,alt:t.name})})}),Object(r.jsx)(w.a,{children:Object(r.jsx)(h.a,{className:b.name,noWrap:!0,gutterBottom:!0,variant:"h5",component:"h2",children:t.name})}),Object(r.jsxs)(z.a,{className:b.actions,children:[Object(r.jsx)(h.a,{className:b.filesize,children:j("filesize",{filesize:t.size})}),Object(r.jsx)(D.a,{className:"Delete-Button ".concat(b.button),size:"small",color:"primary",startIcon:Object(r.jsx)(N.a,{in:n,children:Object(r.jsx)(k.a,{size:14})}),disabled:n,onClick:function(){return c(t.name)},variant:"contained",children:j("delete")})]})]})})})},I=Object(b.a)((function(e){return{totalSize:{display:"flex",alignItems:"flex-end"},header:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}}})),S=function(e){var t=e.documents,n=e.deleting,a=e.deleteDocument,c=Object(O.a)().t,i=I(),o=t.length,s=t.reduce((function(e,t){return e+t.size}),0),u=t.sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(f.a,{id:"Document-List-Header",className:i.header,container:!0,justify:"space-between",alignContent:"flex-end",spacing:2,children:[Object(r.jsx)(f.a,{item:!0,children:Object(r.jsx)(h.a,{id:"Document-List-Header-Count",variant:"h3",component:"h1",children:c("document",{count:o})})}),Object(r.jsx)(f.a,{item:!0,className:i.totalSize,children:Object(r.jsx)(h.a,{id:"Document-List-Header-Size",variant:"h5",children:c("total size",{totalSize:s})})})]}),Object(r.jsx)(f.a,{id:"Document-List-Documents",container:!0,spacing:2,children:u.map((function(e){return Object(r.jsx)(E,{document:e,deleting:n.includes(e.name),deleteDocument:a},e.name)}))})]})},F=n(118),A=function(e){var t=e.errors,n=e.clearError;return Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsx)(F.a,{className:"Document-Error",anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!0,message:e.message,autoHideDuration:1e4,onClose:function(){return n(e)}},e.message)}))})},L=n(56),T=n(57),P=n(60),R=n(59),B=Object(b.a)((function(e){return{page:{height:"100vh"}}})),U=function(){var e=Object(O.a)().t,t=B();return Object(r.jsxs)(f.a,{id:"Error-Page",className:t.page,container:!0,alignItems:"center",justify:"center",direction:"column",children:[Object(r.jsx)(f.a,{item:!0,children:Object(r.jsx)(h.a,{variant:"h3",component:"h1",children:e("error title")})}),Object(r.jsx)(f.a,{item:!0,children:Object(r.jsx)(D.a,{variant:"contained",color:"primary",onClick:function(){return window.location.reload()},children:e("refresh")})})]})},H=function(e){Object(P.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(T.a)(n,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)(U,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(c.a.Component),W=Object(b.a)((function(e){return{loading:{height:"100vh"}}})),G=function(){var e=W();return Object(r.jsx)(f.a,{container:!0,justify:"center",alignItems:"center",className:e.loading,children:Object(r.jsx)(N.a,{in:!0,children:Object(r.jsx)(k.a,{})})})},J=n(117),_=Object(b.a)((function(e){return{search:{borderRadius:e.shape.borderRadius,borderColor:e.palette.grey[400],borderWidth:1,borderStyle:"solid",display:"flex",flexDirection:"row",alignItems:"center",paddingRight:e.spacing(1)},inputRoot:{display:"flex",flexGrow:1},inputInput:{padding:e.spacing(1),display:"block"}}})),K=function(e){var t=e.value,n=e.onChange,a=e.getting,c=Object(O.a)().t,i=_();return Object(r.jsxs)("div",{className:i.search,children:[Object(r.jsx)(J.a,{id:"Document-Search",placeholder:c("search placeholder"),classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return n(e.target.value)},value:t}),Object(r.jsx)(x.a,{in:a,children:Object(r.jsx)(k.a,{size:24})})]})},M=Object(b.a)((function(e){return{button:{display:"flex",textAlign:"center",paddingRight:e.spacing(4)},input:{display:"none"}}})),V=function(e){var t=e.uploading,n=e.uploadDocument,a=Object(O.a)().t,c=M();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{id:"Upload-Input",className:c.input,accept:p.join(", "),type:"file",hidden:!0,onChange:function(e){var t,r=null===(t=e.target.files)||void 0===t?void 0:t[0];e.target.value="",r&&n(r)}}),Object(r.jsx)("label",{htmlFor:"Upload-Input",children:Object(r.jsx)(D.a,{id:"Upload-Button",variant:"contained",className:c.button,component:"div",disabled:t,startIcon:Object(r.jsx)(N.a,{in:t,children:Object(r.jsx)(k.a,{size:14})}),color:"primary",children:a("Upload")})})]})},X=n(21),Z=n.n(X),q=n(34),Q=n(26),Y=n(9),$=n(44),ee=(n(83),n(84),$.a.initializeApp({apiKey:"AIzaSyA9eLEXFPMNIttFTlcZt6vImPOAaE9yPaA",authDomain:"garrett-12-14-2020.firebaseapp.com",projectId:"garrett-12-14-2020",storageBucket:"garrett-12-14-2020.appspot.com",messagingSenderId:"885719165107",appId:"1:885719165107:web:71a5aa03311777029fa8c6"})),te=ee.storage().ref().child("documents"),ne=ee.functions().httpsCallable("searchDocuments"),re=function(){var e=Object(q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){return new Promise((function(t,n){te.child(e.name).put(e).on($.a.storage.TaskEvent.STATE_CHANGED,{error:n,complete:function(){return t({name:e.name,size:e.size})}})}))},ce=function(e){var t=[];return p.includes(e.type)||t.push(new Error("Invalid File Type: '".concat(e.type,"'"))),e.size>1e7&&t.push(new Error("File size too large: ".concat(j(e.size)))),t.length>0?t:null},ie=n(58),oe=n.n(ie),se={getting:!1,uploading:!1,deleting:[],documents:null,errors:[]},ue=function(e,t){var n,r,a;switch(t.type){case"get-start":return Object(Y.a)(Object(Y.a)({},e),{},{getting:!0});case"get-error":return Object(Y.a)(Object(Y.a)({},e),{},{getting:!1,errors:[].concat(Object(Q.a)(e.errors),[t.error])});case"get-success":return Object(Y.a)(Object(Y.a)({},e),{},{getting:!1,documents:t.documents});case"upload-start":return Object(Y.a)(Object(Y.a)({},e),{},{uploading:!0});case"upload-error":return Object(Y.a)(Object(Y.a)({},e),{},{uploading:!1,errors:[].concat(Object(Q.a)(e.errors),Object(Q.a)(t.errors))});case"upload-success":return Object(Y.a)(Object(Y.a)({},e),{},{uploading:!1,documents:[].concat(Object(Q.a)(e.documents||[]),Object(Q.a)((null===(n=e.documents)||void 0===n?void 0:n.find((function(e){return e.name===t.document.name})))?[]:[t.document]))});case"delete-start":return Object(Y.a)(Object(Y.a)({},e),{},{deleting:[].concat(Object(Q.a)(e.deleting),[t.documentName])});case"delete-error":return Object(Y.a)(Object(Y.a)({},e),{},{deleting:e.deleting.filter((function(e){return e!==t.documentName})),errors:[].concat(Object(Q.a)(e.errors),[t.error])});case"delete-success":return Object(Y.a)(Object(Y.a)({},e),{},{deleting:e.deleting.filter((function(e){return e!==t.documentName})),documents:null!==(r=null===(a=e.documents)||void 0===a?void 0:a.filter((function(e){return e.name!==t.documentName})))&&void 0!==r?r:null});case"clear-error":return Object(Y.a)(Object(Y.a)({},e),{},{errors:e.errors.filter((function(e){return e!==t.error}))});default:throw new Error("Unknown action")}},le=Object(b.a)((function(e){return{app:{padding:e.spacing(2),height:"100vh",display:"flex",flexDirection:"column"},actions:{marginBottom:e.spacing(1)}}})),de=function(){var e=le(),t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],i=n[1],o=function(e){var t=Object(a.useReducer)(ue,se),n=Object(m.a)(t,2),r=n[0],c=n[1],i=oe()(function(){var e=Object(q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"get-start",search:t}),e.prev=1,e.next=4,re(t);case 4:n=e.sent,c({type:"get-success",documents:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"get-error",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),500),o=Object(a.useCallback)(function(){var e=Object(q.a)(Z.a.mark((function e(t){var n,r,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c({type:"upload-start"}),e.prev=1,!(n=ce(t))){e.next=5;break}throw n;case 5:return e.next=7,ae(t);case 7:r=e.sent,c({type:"upload-success",document:r}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),a=Array.isArray(e.t0)?e.t0:[e.t0],c({type:"upload-error",errors:a});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),[c]),s=Object(a.useCallback)(function(){var e=Object(q.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"delete-start",documentName:t}),e.prev=1,e.next=4,n=t,te.child(n).delete();case 4:c({type:"delete-success",documentName:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c({type:"delete-error",documentName:t,error:e.t0});case 10:case"end":return e.stop()}var n}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[c]),u=Object(a.useCallback)((function(e){return c({type:"clear-error",error:e})}),[c]);return Object(a.useEffect)((function(){i.callback(e)}),[e,i]),{state:r,uploadDocument:o,deleteDocument:s,clearError:u}}(c),s=o.state,u=s.getting,l=s.uploading,d=s.deleting,p=s.documents,j=s.errors,b=o.uploadDocument,h=o.deleteDocument,O=o.clearError;return!p&&j.length>0?Object(r.jsx)(U,{}):p?Object(r.jsxs)(H,{children:[Object(r.jsx)(A,{errors:j,clearError:O}),Object(r.jsxs)(g.a,{maxWidth:"md",className:e.app,children:[Object(r.jsxs)(f.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(r.jsx)(f.a,{item:!0,xs:12,md:2,className:e.actions,children:Object(r.jsx)(V,{uploadDocument:b,uploading:l})}),Object(r.jsx)(f.a,{item:!0,xs:12,md:6,className:e.actions,children:Object(r.jsx)(K,{value:c,onChange:i,getting:u})})]}),Object(r.jsx)(S,{documents:null!==p&&void 0!==p?p:[],deleting:d,deleteDocument:h})]})]}):Object(r.jsx)(G,{})},pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(de,{}),document.getElementById("root")),pe()}},[[82,1,2]]]);
//# sourceMappingURL=main.b867e380.chunk.js.map