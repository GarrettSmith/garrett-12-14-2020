{"version":3,"sources":["common/constants.ts","common/format.ts","common/i18n.ts","list/DocumentTile.tsx","list/DocumentList.tsx","errors/ErrorAlerts.tsx","errors/ErrorPage.tsx","errors/ErrorBoundary.tsx","loading/LoadingPage.tsx","search/SearchInput.tsx","upload/UploadButton.tsx","common/firebase.ts","common/validations.ts","common/useDocuments.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["validFileTypes","formatFilesize","size","numeral","format","toLowerCase","i18n","use","initReactI18next","init","resources","en","translation","document","document_plural","filesize","upload","delete","lng","keySeparator","interpolation","escapeValue","value","lang","useStyles","makeStyles","theme","card","height","display","justifyContent","flexDirection","backgroundPosition","backgroundSize","actions","alignItems","padding","spacing","name","textOverflow","button","paddingRight","media","paddingTop","image","visibility","width","DocumentTile","deleting","deleteDocument","useState","loaded","setLoaded","imageRef","useRef","onImageLoad","useEffect","ref","current","addEventListener","removeEventListener","imgUrl","t","useTranslation","classes","Grid","className","item","xs","md","Fade","in","Card","variant","CardMedia","title","src","alt","CardContent","Typography","noWrap","gutterBottom","component","CardActions","Button","color","startIcon","Grow","CircularProgress","disabled","onClick","totalSize","header","paddingBottom","DocumentList","documents","totalCount","length","reduce","doc","sortedDocuments","sort","a","b","localeCompare","id","container","justify","alignContent","count","map","d","includes","ErrorAlerts","errors","clearError","e","Snackbar","anchorOrigin","vertical","horizontal","open","message","autoHideDuration","onClose","page","ErrorPage","direction","window","location","reload","ErrorBoundary","state","hasError","error","errorInfo","this","props","children","React","Component","loading","LoadingPage","search","borderRadius","shape","borderColor","palette","grey","borderWidth","borderStyle","inputRoot","flexGrow","inputInput","SearchInput","onChange","getting","InputBase","placeholder","root","input","inputProps","target","textAlign","UploadButton","uploading","uploadDocument","accept","join","type","hidden","event","file","files","htmlFor","app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","documentsRef","storage","child","searchFunction","functions","httpsCallable","searchDocuments","data","Promise","resolve","reject","put","on","TaskEvent","STATE_CHANGED","complete","validateFile","push","Error","initialState","reducer","action","find","x","documentName","filter","marginBottom","App","setSearch","useReducer","dispatch","getDocuments","useDebouncedCallback","service","useCallback","validationErrors","Array","isArray","callback","useDocuments","Container","maxWidth","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b867e380.chunk.js","sourcesContent":["export const validFileTypes = [\"image/png\", \"image/jpeg\"];\nexport const maxFileSize = 10* 1000 * 1000; // 10 MB\nexport const filesizeFormat = \"0.0b\";\nexport const errorDisplayDuration = 10000; // 10s\nexport const searchDebounce = 500; // 0.5s\n","import numeral from \"numeral\";\nimport { filesizeFormat } from \"./constants\";\n\n// Format to lowercase to match designs\n// Normally, I would have raised this concern with design, \n// or follow company standards around displaying filesize.\nexport const formatFilesize = (size: number) =>\n  numeral(size).format(filesizeFormat).toLowerCase();\n","import i18n, { Resource } from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { formatFilesize } from \"./format\";\n\nconst resources: Resource = {\n  en: {\n    translation: {\n      document: \"{{count}} document\",\n      document_plural: \"{{count}} documents\",\n      filesize: \"{{filesize, filesize}}\",\n      \"total size\": \"Total size: {{totalSize, filesize}}\",\n      upload: \"UPLOAD\",\n      \"upload error\": \"Failed to upload file!\",\n      \"upload success\": \"Successfully uploaded '{{ filename }}'!\",\n      delete: \"Delete\",\n      \"search placeholder\": \"Search documents...\",\n      \"error title\": \"An error has occurred!\",\n      \"refresh\": \"Refresh\"\n    },\n  },\n};\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    lng: \"en\",\n\n    keySeparator: false, // we do not use keys in form messages.welcome\n\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n\n      format: (value, format, lang) => {\n        switch (format) {\n          case \"filesize\":\n            return formatFilesize(value);\n          default:\n            return value;\n        }\n      },\n    },\n  });\n\nexport default i18n;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  CircularProgress,\n  Fade,\n  Grid,\n  Grow,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flexDirection: \"column\",\n    backgroundPosition: \"center\",\n    backgroundSize: \"cover\",\n  },\n  actions: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: theme.spacing(2),\n  },\n  filesize: {\n    alignItems: \"flex-end\",\n  },\n  name: {\n    textOverflow: \"ellipsis\",\n  },\n  button: {\n    paddingRight: theme.spacing(4),\n  },\n  media: {\n    paddingTop: \"60%\",\n  },\n  image: {\n    display: \"none\",\n    visibility: \"hidden\",\n    width: 0,\n    height: 0,\n  }\n}));\n\nexport interface Props {\n  document: Document;\n  deleting: boolean;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentTile: React.FC<Props> = ({\n  document,\n  deleting,\n  deleteDocument,\n}) => {\n  const [loaded, setLoaded] = useState(false);\n  const imageRef = useRef<HTMLImageElement>(null);\n\n  const onImageLoad = () => setLoaded(true);\n  \n  // Use a hidden img element to listen to an image load effect and fade in the media component\n  useEffect(() => {\n    const ref = imageRef.current;\n    if (ref) {\n      ref.addEventListener(\"load\", onImageLoad);\n      return () => ref.removeEventListener(\"load\", onImageLoad);\n    }\n  }, [imageRef]);\n\n  // TODO this should be provided by the Firebase API\n  // TODO use an API that can scale down these images\n  const imgUrl =\n    `https://firebasestorage.googleapis.com/v0/b/garrett-12-14-2020.appspot.com/o/documents%2F${document.name}?alt=media`;\n\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid className=\"Document-Tile\" item xs={12} md={4}>\n      <Fade in>\n        <Card\n          className={classes.card}\n          variant=\"outlined\"\n        >\n          <Fade in={loaded}>\n            <CardMedia\n              className={classes.media}\n              image={imgUrl}\n              title={document.name}\n            >\n              <img src={imgUrl} className={classes.image} ref={imageRef} alt={document.name} />\n            </CardMedia>  \n          </Fade>\n          <CardContent>\n            <Typography\n              className={classes.name}\n              noWrap\n              gutterBottom\n              variant=\"h5\"\n              component=\"h2\"\n            >\n              {document.name}\n            </Typography>\n          </CardContent>\n          <CardActions className={classes.actions}>\n            <Typography className={classes.filesize}>\n              {t(\"filesize\", { filesize: document.size })}\n            </Typography>\n            <Button\n              className={`Delete-Button ${classes.button}`}\n              size=\"small\"\n              color=\"primary\"\n              startIcon={\n                <Grow in={deleting}>\n                  <CircularProgress size={14} />\n                </Grow>\n              }\n              disabled={deleting}\n              onClick={() => deleteDocument(document.name)}\n              variant=\"contained\"\n            >\n              {t(\"delete\")}\n            </Button>\n          </CardActions>\n        </Card>\n      </Fade>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\nimport { DocumentTile } from \"./DocumentTile\";\n\nconst useStyles = makeStyles((theme) => ({\n  totalSize: {\n    display: \"flex\",\n    alignItems: \"flex-end\",\n  },\n  header: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n  },\n}));\n\nexport interface Props {\n  documents: Array<Document>;\n  deleting: Array<string>;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentList: React.FC<Props> = ({\n  documents,\n  deleting,\n  deleteDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const totalCount = documents.length;\n  const totalSize = documents.reduce((size, doc) => size + doc.size, 0);\n  const sortedDocuments = documents.sort((a, b) =>\n    a.name.localeCompare(b.name)\n  );\n  return (\n    <>\n      <Grid\n        id=\"Document-List-Header\"\n        className={classes.header}\n        container\n        justify=\"space-between\"\n        alignContent=\"flex-end\"\n        spacing={2}\n      >\n        <Grid item>\n          <Typography\n            id=\"Document-List-Header-Count\"\n            variant=\"h3\"\n            component=\"h1\"\n          >\n            {t(\"document\", { count: totalCount })}\n          </Typography>\n        </Grid>\n        <Grid item className={classes.totalSize}>\n          <Typography id=\"Document-List-Header-Size\" variant=\"h5\">\n            {t(\"total size\", { totalSize })}\n          </Typography>\n        </Grid>\n      </Grid>\n      <Grid id=\"Document-List-Documents\" container spacing={2}>\n        {sortedDocuments.map((d) => (\n          <DocumentTile\n            key={d.name}\n            document={d}\n            deleting={deleting.includes(d.name)}\n            deleteDocument={deleteDocument}\n          />\n        ))}\n      </Grid>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Snackbar } from \"@material-ui/core\";\nimport { errorDisplayDuration } from \"../common/constants\";\n\nexport interface Props {\n  errors: Array<Error>;\n  clearError: (error: Error) => void;\n}\n\nexport const ErrorAlerts: React.FC<Props> = ({ errors, clearError }) => {\n  return (\n    <>\n      {errors.map((e) => (\n        <Snackbar\n          className=\"Document-Error\"\n          anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n          open={true}\n          message={e.message}\n          key={e.message}\n          autoHideDuration={errorDisplayDuration}\n          onClose={() => clearError(e)}\n        />\n      ))}\n    </>\n  );\n};\n","import React from \"react\";\nimport { Button, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    height: \"100vh\",\n  },\n}));\n\nexport const ErrorPage: React.FC = () => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid\n      id=\"Error-Page\"\n      className={classes.page}\n      container\n      alignItems=\"center\"\n      justify=\"center\"\n      direction=\"column\"\n    >\n      <Grid item>\n        <Typography variant=\"h3\" component=\"h1\">\n          {t(\"error title\")}\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => window.location.reload()}\n        >\n          {t(\"refresh\")}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { ErrorPage } from \"./ErrorPage\";\n\ninterface State {\n    hasError: boolean;\n}\n\nexport class ErrorBoundary extends React.Component<React.PropsWithChildren<{}>, State> {\n  state = { hasError: false };\n\n  static getDerivedStateFromError(error: any) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: any, errorInfo: React.ErrorInfo) {\n    // TODO log the error to a tracking servic\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { CircularProgress, Grid, Grow, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  loading: {\n    height: \"100vh\"\n  },\n}));\n\nexport const LoadingPage: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      className={classes.loading}\n    >\n      <Grow in>        \n        <CircularProgress />\n      </Grow>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { CircularProgress, Fade, InputBase, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    borderRadius: theme.shape.borderRadius,\n    borderColor: theme.palette.grey[400],\n    borderWidth: 1,\n    borderStyle: \"solid\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingRight: theme.spacing(1),\n  },\n  inputRoot: {\n    display: \"flex\",\n    flexGrow: 1,\n  },\n  inputInput: {\n    padding: theme.spacing(1),\n    display: \"block\",\n  },\n}));\n\ninterface Props {\n  value: string;\n  onChange: (search: string) => void;\n  getting: boolean;\n}\n\nexport const SearchInput: React.FC<Props> = ({ value, onChange, getting }) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <div className={classes.search}>\n      <InputBase\n        id=\"Document-Search\"\n        placeholder={t(\"search placeholder\")}\n        classes={{\n          root: classes.inputRoot,\n          input: classes.inputInput,\n        }}\n        inputProps={{ \"aria-label\": \"search\" }}\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n      />\n      <Fade in={getting}>\n        <CircularProgress size={24} />\n      </Fade>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Button, CircularProgress, Grow, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { validFileTypes } from \"../common/constants\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    display: \"flex\",\n    textAlign: \"center\",\n    paddingRight: theme.spacing(4),\n  },\n  input: {\n    display: \"none\",\n  },\n}));\n\nexport interface Props {\n  uploadDocument: (file: File) => void;\n  uploading: boolean;\n}\n\nexport const UploadButton: React.FC<Props> = ({\n  uploading,\n  uploadDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n\n    // Reset the input\n    event.target.value = \"\";\n\n    if (file) {\n      uploadDocument(file);\n    }\n  };\n\n  return (\n    <>\n      <input\n        id=\"Upload-Input\"\n        className={classes.input}\n        accept={validFileTypes.join(\", \")}\n        type=\"file\"\n        hidden\n        onChange={onChange}\n      />\n      <label htmlFor=\"Upload-Input\">\n        <Button\n          id=\"Upload-Button\"\n          variant=\"contained\"\n          className={classes.button}\n          component=\"div\"\n          disabled={uploading}\n          startIcon={\n            <Grow in={uploading}>\n              <CircularProgress size={14} />\n            </Grow>\n          }\n          color=\"primary\"\n        >\n          {t(\"Upload\")}\n        </Button>\n      </label>\n    </>\n  );\n};\n","import firebase from \"firebase/app\";\nimport \"firebase/storage\";\nimport \"firebase/functions\";\nimport { FunctionDocument } from \"./models\";\n\n// Set the configuration for your app\n// TODO move to a configuration file\n// TODO load different configuration based on environment\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA9eLEXFPMNIttFTlcZt6vImPOAaE9yPaA\",\n  authDomain: \"garrett-12-14-2020.firebaseapp.com\",\n  projectId: \"garrett-12-14-2020\",\n  storageBucket: \"garrett-12-14-2020.appspot.com\",\n  messagingSenderId: \"885719165107\",\n  appId: \"1:885719165107:web:71a5aa03311777029fa8c6\",\n};\nconst app = firebase.initializeApp(firebaseConfig);\n\n// Get a reference to the storage service, which is used to create references in your storage bucket\nconst storage = app.storage();\n\nconst storageRef = storage.ref();\nconst documentsRef = storageRef.child(\"documents\");\n\n// Get a reference to the functions service, which is use to call your cloud functions\nconst functions = app.functions();\n\nconst searchFunction = functions.httpsCallable(\"searchDocuments\");\n\nexport const searchDocuments = async (search: string) => {\n  const { data: documents } = await searchFunction(search);\n  // TODO validate response structure\n  return documents as Array<FunctionDocument>;\n};\n\nexport const deleteDocument = (name: string) =>\n  documentsRef.child(name).delete() as Promise<void>;\n\nexport const uploadDocument = (file: File) =>\n  new Promise<FunctionDocument>((resolve, reject) => {\n    const uploadTask = documentsRef.child(file.name).put(file);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, {\n      error: reject,\n      complete: () => resolve({ name: file.name, size: file.size }),\n    });\n  });\n","import { maxFileSize, validFileTypes } from \"./constants\";\nimport { formatFilesize } from \"./format\";\n\nexport const validateFile = (file: File) => {\n  const errors = [];\n\n  if (!validFileTypes.includes(file.type)) {\n    errors.push(new Error(`Invalid File Type: '${file.type}'`));\n  }\n\n  if (file.size > maxFileSize) {\n    errors.push(new Error(`File size too large: ${formatFilesize(file.size)}`));\n  }\n\n  return errors.length > 0 ? errors : null;\n};\n","import { useCallback, useEffect, useReducer } from \"react\";\nimport * as service from \"./firebase\";\nimport { searchDebounce } from \"./constants\";\nimport { validateFile } from \"./validations\";\nimport { Document } from \"./models\";\nimport useDebouncedCallback from \"use-debounce/lib/useDebouncedCallback\";\n\ninterface State {\n  getting: boolean;\n  uploading: boolean;\n  deleting: Array<string>;\n  documents: Array<Document> | null;\n  errors: Array<Error>;\n}\n\ntype Action =\n  | { type: \"get-start\"; search: string }\n  | { type: \"get-error\"; error: Error }\n  | { type: \"get-success\"; documents: Array<Document> }\n  | { type: \"upload-start\"; }\n  | { type: \"upload-error\"; errors: Array<Error> }\n  | { type: \"upload-success\"; document: Document }\n  | { type: \"delete-start\"; documentName: string }\n  | { type: \"delete-error\"; documentName: string; error: Error }\n  | { type: \"delete-success\"; documentName: string }\n  | { type: \"clear-error\"; error: Error };\n\nconst initialState: State = {\n  getting: false,\n  uploading: false,\n  deleting: [],\n  documents: null,\n  errors: [],\n};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"get-start\":\n      return {\n        ...state,\n        getting: true,\n      };\n    case \"get-error\":\n      return {\n        ...state,\n        getting: false,\n        errors: [ ...state.errors, action.error],\n      };\n    case \"get-success\":\n      return {\n        ...state,\n        getting: false,\n        documents: action.documents,\n      };\n\n    case \"upload-start\":\n      return {\n        ...state,\n        uploading: true,\n      };\n    case \"upload-error\":\n      return {\n        ...state,\n        uploading: false,\n        errors: [...state.errors, ...action.errors],\n      };\n    case \"upload-success\":\n      return {\n        ...state,\n        uploading: false,\n        documents: [\n          ...(state.documents || []),\n          // Don't add duplicated documents\n          ...(state.documents?.find(x => x.name === action.document.name) ? [] : [action.document])\n        ],\n      };\n\n    case \"delete-start\":\n      return {\n        ...state,\n        deleting: [...state.deleting, action.documentName],\n      };\n    case \"delete-error\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        errors: [...state.errors, action.error],\n      };\n    case \"delete-success\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        documents: state.documents?.filter(\n          (x) => x.name !== action.documentName\n        ) ?? null,\n      };\n\n    case \"clear-error\":\n      return {\n        ...state,\n        errors: state.errors.filter((x) => x !== action.error),\n      };\n\n    default:\n      throw new Error(`Unknown action`);\n  }\n};\n\nexport const useDocuments = (search: string) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const getDocuments = useDebouncedCallback(async (search: string) => {\n    dispatch({ type: \"get-start\", search });\n    try {\n      const documents = await service.searchDocuments(search);\n      dispatch({ type: \"get-success\", documents })\n    } catch (error) {\n      dispatch({ type: \"get-error\", error })\n    }\n  }, searchDebounce);\n\n  const uploadDocument = useCallback(async (file: File) => {\n    dispatch({ type: \"upload-start\" });\n    try {\n      const validationErrors = validateFile(file);\n      if (validationErrors) throw validationErrors;\n      const document = await service.uploadDocument(file);\n      dispatch({ type: \"upload-success\", document })\n    } catch (e) {\n      const errors = Array.isArray(e) ? e : [e];\n      dispatch({ type: \"upload-error\", errors })\n    }\n  }, [dispatch]);\n\n  const deleteDocument = useCallback(async (documentName: string) => {\n    dispatch({ type: \"delete-start\", documentName });\n    try {\n      await service.deleteDocument(documentName);\n      dispatch({ type: \"delete-success\", documentName });\n    } catch (error) {\n      dispatch({ type: \"delete-error\", documentName, error });\n    }\n  }, [dispatch]);\n\n  const clearError = useCallback(\n    (error: Error) => dispatch({ type: \"clear-error\", error }),\n    [dispatch]\n  );\n\n  useEffect(() => {\n    getDocuments.callback(search);\n  }, [search, getDocuments]);\n\n  return {\n    state,\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  };\n};\n","import React, { useState } from \"react\";\nimport { Container, Grid, makeStyles } from \"@material-ui/core\";\n\nimport { DocumentList } from \"./list/DocumentList\";\nimport { ErrorAlerts } from \"./errors/ErrorAlerts\";\nimport { ErrorBoundary } from \"./errors/ErrorBoundary\";\nimport { ErrorPage } from \"./errors/ErrorPage\";\nimport { LoadingPage } from \"./loading/LoadingPage\";\nimport { SearchInput } from \"./search/SearchInput\";\nimport { UploadButton } from \"./upload/UploadButton\";\nimport { useDocuments } from \"./common/useDocuments\";\n\nconst useStyles = makeStyles((theme) => ({\n  app: {\n    padding: theme.spacing(2),\n    height: \"100vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  actions: {\n    marginBottom: theme.spacing(1),\n  },\n}));\n\nexport const App: React.FC = () => {\n  const classes = useStyles();\n  const [search, setSearch] = useState(\"\");\n  const {\n    state: { getting, uploading, deleting, documents, errors },\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  } = useDocuments(search);\n\n  if (!documents && errors.length > 0) {\n    return <ErrorPage />;\n  } else if (!documents) {\n    return <LoadingPage />;\n  }\n\n  return (\n    <ErrorBoundary>\n      <ErrorAlerts errors={errors} clearError={clearError} />\n      <Container maxWidth=\"md\" className={classes.app}>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Grid item xs={12} md={2} className={classes.actions}>\n            <UploadButton\n              uploadDocument={uploadDocument}\n              uploading={uploading}\n            />\n          </Grid>\n          <Grid item xs={12} md={6} className={classes.actions}>\n            <SearchInput value={search} onChange={setSearch} getting={getting} />\n          </Grid>\n        </Grid>\n        <DocumentList\n          documents={documents ?? []}\n          deleting={deleting}\n          deleteDocument={deleteDocument}\n        />\n      </Container>\n    </ErrorBoundary>\n  );\n};\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./common/i18n\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}