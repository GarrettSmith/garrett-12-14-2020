{"version":3,"sources":["common/constants.ts","common/format.ts","common/i18n.ts","list/DocumentTile.tsx","list/DocumentList.tsx","errors/ErrorAlerts.tsx","errors/ErrorPage.tsx","errors/ErrorBoundary.tsx","loading/LoadingPage.tsx","search/SearchInput.tsx","upload/UploadButton.tsx","common/firebase.ts","common/validations.ts","common/useDocuments.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["validFileTypes","formatFilesize","size","numeral","format","toLowerCase","i18n","use","initReactI18next","init","resources","en","translation","document","document_plural","filesize","upload","delete","lng","keySeparator","interpolation","escapeValue","value","lang","useStyles","makeStyles","theme","card","height","display","justifyContent","flexDirection","actions","alignItems","padding","spacing","name","textOverflow","button","paddingRight","DocumentTile","deleting","deleteDocument","t","useTranslation","classes","Grid","className","item","xs","md","Fade","in","Card","variant","CardContent","Typography","noWrap","gutterBottom","component","CardActions","Button","color","startIcon","Grow","CircularProgress","disabled","onClick","totalSize","header","paddingTop","paddingBottom","DocumentList","documents","totalCount","length","reduce","doc","sortedDocuments","sort","a","b","localeCompare","id","container","justify","alignContent","count","map","d","includes","ErrorAlerts","errors","clearError","e","Snackbar","anchorOrigin","vertical","horizontal","open","message","autoHideDuration","onClose","page","ErrorPage","direction","window","location","reload","ErrorBoundary","state","hasError","error","errorInfo","this","props","children","React","Component","loading","LoadingPage","search","borderRadius","shape","borderColor","palette","grey","borderWidth","borderStyle","inputRoot","flexGrow","inputInput","SearchInput","onChange","getting","InputBase","placeholder","root","input","inputProps","target","textAlign","UploadButton","uploading","uploadDocument","accept","join","type","hidden","event","file","files","htmlFor","app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","documentsRef","storage","ref","child","searchFunction","functions","httpsCallable","searchDocuments","data","Promise","resolve","reject","put","on","TaskEvent","STATE_CHANGED","complete","validateFile","push","Error","initialState","reducer","action","find","x","documentName","filter","marginBottom","App","useState","setSearch","useReducer","dispatch","getDocuments","useDebouncedCallback","service","useCallback","validationErrors","Array","isArray","useEffect","callback","useDocuments","Container","maxWidth","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8cb7a7e0.chunk.js","sourcesContent":["export const validFileTypes = [\"image/png\", \"image/jpeg\"];\nexport const maxFileSize = 10* 1000 * 1000; // 10 MB\nexport const filesizeFormat = \"0.0b\";\nexport const errorDisplayDuration = 10000; // 10s\nexport const searchDebounce = 500; // 0.5s\n","import numeral from \"numeral\";\nimport { filesizeFormat } from \"./constants\";\n\n// Format to lowercase to match designs\n// Normally, I would have raised this concern with design, \n// or follow company standards around displaying filesize.\nexport const formatFilesize = (size: number) =>\n  numeral(size).format(filesizeFormat).toLowerCase();\n","import i18n, { Resource } from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { formatFilesize } from \"./format\";\n\nconst resources: Resource = {\n  en: {\n    translation: {\n      document: \"{{count}} document\",\n      document_plural: \"{{count}} documents\",\n      filesize: \"{{filesize, filesize}}\",\n      \"total size\": \"Total size: {{totalSize, filesize}}\",\n      upload: \"UPLOAD\",\n      \"upload error\": \"Failed to upload file!\",\n      \"upload success\": \"Successfully uploaded '{{ filename }}'!\",\n      delete: \"Delete\",\n      \"search placeholder\": \"Search documents...\",\n      \"error title\": \"An error has occurred!\",\n      \"refresh\": \"Refresh\"\n    },\n  },\n};\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    lng: \"en\",\n\n    keySeparator: false, // we do not use keys in form messages.welcome\n\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n\n      format: (value, format, lang) => {\n        switch (format) {\n          case \"filesize\":\n            return formatFilesize(value);\n          default:\n            return value;\n        }\n      },\n    },\n  });\n\nexport default i18n;\n","import React from \"react\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CircularProgress,\n  Fade,\n  Grid,\n  Grow,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flexDirection: \"column\",\n  },\n  actions: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: theme.spacing(2),\n  },\n  filesize: {\n    alignItems: \"flex-end\",\n  },\n  name: {\n    textOverflow: \"ellipsis\",\n  },\n  button: {\n    paddingRight: theme.spacing(4),\n  }\n}));\n\nexport interface Props {\n  document: Document;\n  deleting: boolean;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentTile: React.FC<Props> = ({\n  document,\n  deleting,\n  deleteDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid className=\"Document-Tile\" item xs={12} md={4}>\n      <Fade in>\n        <Card className={classes.card} variant=\"outlined\">\n          <CardContent>\n            <Typography\n              className={classes.name}\n              noWrap\n              gutterBottom\n              variant=\"h5\"\n              component=\"h2\"\n            >\n              {document.name}\n            </Typography>\n          </CardContent>\n          <CardActions className={classes.actions}>\n            <Typography className={classes.filesize}>\n              {t(\"filesize\", { filesize: document.size })}\n            </Typography>\n            <Button\n              className={`Delete-Button ${classes.button}`}\n              size=\"small\"\n              color=\"primary\"\n              startIcon={\n                <Grow in={deleting}>\n                  <CircularProgress size={14} />\n                </Grow>\n              }\n              disabled={deleting}\n              onClick={() => deleteDocument(document.name)}\n              variant=\"contained\"\n            >\n              {t(\"delete\")}\n            </Button>\n          </CardActions>\n        </Card>\n      </Fade>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { Document } from \"../common/models\";\nimport { DocumentTile } from \"./DocumentTile\";\n\nconst useStyles = makeStyles((theme) => ({\n  totalSize: {\n    display: \"flex\",\n    alignItems: \"flex-end\",\n  },\n  header: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n  },\n}));\n\nexport interface Props {\n  documents: Array<Document>;\n  deleting: Array<string>;\n  deleteDocument: (documentName: string) => void;\n}\n\nexport const DocumentList: React.FC<Props> = ({\n  documents,\n  deleting,\n  deleteDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const totalCount = documents.length;\n  const totalSize = documents.reduce((size, doc) => size + doc.size, 0);\n  const sortedDocuments = documents.sort((a, b) =>\n    a.name.localeCompare(b.name)\n  );\n  return (\n    <>\n      <Grid\n        id=\"Document-List-Header\"\n        className={classes.header}\n        container\n        justify=\"space-between\"\n        alignContent=\"flex-end\"\n        spacing={2}\n      >\n        <Grid item>\n          <Typography\n            id=\"Document-List-Header-Count\"\n            variant=\"h3\"\n            component=\"h1\"\n          >\n            {t(\"document\", { count: totalCount })}\n          </Typography>\n        </Grid>\n        <Grid item className={classes.totalSize}>\n          <Typography id=\"Document-List-Header-Size\" variant=\"h5\">\n            {t(\"total size\", { totalSize })}\n          </Typography>\n        </Grid>\n      </Grid>\n      <Grid id=\"Document-List-Documents\" container spacing={2}>\n        {sortedDocuments.map((d) => (\n          <DocumentTile\n            key={d.name}\n            document={d}\n            deleting={deleting.includes(d.name)}\n            deleteDocument={deleteDocument}\n          />\n        ))}\n      </Grid>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Snackbar } from \"@material-ui/core\";\nimport { errorDisplayDuration } from \"../common/constants\";\n\nexport interface Props {\n  errors: Array<Error>;\n  clearError: (error: Error) => void;\n}\n\nexport const ErrorAlerts: React.FC<Props> = ({ errors, clearError }) => {\n  return (\n    <>\n      {errors.map((e) => (\n        <Snackbar\n          className=\"Document-Error\"\n          anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n          open={true}\n          message={e.message}\n          key={e.message}\n          autoHideDuration={errorDisplayDuration}\n          onClose={() => clearError(e)}\n        />\n      ))}\n    </>\n  );\n};\n","import React from \"react\";\nimport { Button, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    height: \"100vh\",\n  },\n}));\n\nexport const ErrorPage: React.FC = () => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <Grid\n      id=\"Error-Page\"\n      className={classes.page}\n      container\n      alignItems=\"center\"\n      justify=\"center\"\n      direction=\"column\"\n    >\n      <Grid item>\n        <Typography variant=\"h3\" component=\"h1\">\n          {t(\"error title\")}\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => window.location.reload()}\n        >\n          {t(\"refresh\")}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { ErrorPage } from \"./ErrorPage\";\n\ninterface State {\n    hasError: boolean;\n}\n\nexport class ErrorBoundary extends React.Component<React.PropsWithChildren<{}>, State> {\n  state = { hasError: false };\n\n  static getDerivedStateFromError(error: any) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: any, errorInfo: React.ErrorInfo) {\n    // TODO log the error to a tracking servic\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { CircularProgress, Grid, Grow, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  loading: {\n    height: \"100vh\"\n  },\n}));\n\nexport const LoadingPage: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      className={classes.loading}\n    >\n      <Grow in>        \n        <CircularProgress />\n      </Grow>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { CircularProgress, Fade, InputBase, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    borderRadius: theme.shape.borderRadius,\n    borderColor: theme.palette.grey[400],\n    borderWidth: 1,\n    borderStyle: \"solid\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingRight: theme.spacing(1),\n  },\n  inputRoot: {\n    display: \"flex\",\n    flexGrow: 1,\n  },\n  inputInput: {\n    padding: theme.spacing(1),\n    display: \"block\",\n  },\n}));\n\ninterface Props {\n  value: string;\n  onChange: (search: string) => void;\n  getting: boolean;\n}\n\nexport const SearchInput: React.FC<Props> = ({ value, onChange, getting }) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <div className={classes.search}>\n      <InputBase\n        id=\"Document-Search\"\n        placeholder={t(\"search placeholder\")}\n        classes={{\n          root: classes.inputRoot,\n          input: classes.inputInput,\n        }}\n        inputProps={{ \"aria-label\": \"search\" }}\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n      />\n      <Fade in={getting}>\n        <CircularProgress size={24} />\n      </Fade>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Button, CircularProgress, Grow, makeStyles } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { validFileTypes } from \"../common/constants\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    display: \"flex\",\n    textAlign: \"center\",\n    paddingRight: theme.spacing(4),\n  },\n  input: {\n    display: \"none\",\n  },\n}));\n\nexport interface Props {\n  uploadDocument: (file: File) => void;\n  uploading: boolean;\n}\n\nexport const UploadButton: React.FC<Props> = ({\n  uploading,\n  uploadDocument,\n}) => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n\n    // Reset the input\n    event.target.value = \"\";\n\n    if (file) {\n      uploadDocument(file);\n    }\n  };\n\n  return (\n    <>\n      <input\n        id=\"Upload-Input\"\n        className={classes.input}\n        accept={validFileTypes.join(\", \")}\n        type=\"file\"\n        hidden\n        onChange={onChange}\n      />\n      <label htmlFor=\"Upload-Input\">\n        <Button\n          id=\"Upload-Button\"\n          variant=\"contained\"\n          className={classes.button}\n          component=\"div\"\n          disabled={uploading}\n          startIcon={\n            <Grow in={uploading}>\n              <CircularProgress size={14} />\n            </Grow>\n          }\n          color=\"primary\"\n        >\n          {t(\"Upload\")}\n        </Button>\n      </label>\n    </>\n  );\n};\n","import firebase from \"firebase/app\";\nimport \"firebase/storage\";\nimport \"firebase/functions\";\nimport { FunctionDocument } from \"./models\";\n\n// Set the configuration for your app\n// TODO move to a configuration file\n// TODO load different configuration based on environment\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA9eLEXFPMNIttFTlcZt6vImPOAaE9yPaA\",\n  authDomain: \"garrett-12-14-2020.firebaseapp.com\",\n  projectId: \"garrett-12-14-2020\",\n  storageBucket: \"garrett-12-14-2020.appspot.com\",\n  messagingSenderId: \"885719165107\",\n  appId: \"1:885719165107:web:71a5aa03311777029fa8c6\",\n};\nconst app = firebase.initializeApp(firebaseConfig);\n\n// Get a reference to the storage service, which is used to create references in your storage bucket\nconst storage = app.storage();\n\nconst storageRef = storage.ref();\nconst documentsRef = storageRef.child(\"documents\");\n\n// Get a reference to the functions service, which is use to call your cloud functions\nconst functions = app.functions();\n\nconst searchFunction = functions.httpsCallable(\"searchDocuments\");\n\nexport const searchDocuments = async (search: string) => {\n  const { data: documents } = await searchFunction(search);\n  // TODO validate response structure\n  return documents as Array<FunctionDocument>;\n};\n\nexport const deleteDocument = (name: string) =>\n  documentsRef.child(name).delete() as Promise<void>;\n\nexport const uploadDocument = (file: File) =>\n  new Promise<FunctionDocument>((resolve, reject) => {\n    const uploadTask = documentsRef.child(file.name).put(file);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, {\n      error: reject,\n      complete: () => resolve({ name: file.name, size: file.size }),\n    });\n  });\n","import { maxFileSize, validFileTypes } from \"./constants\";\nimport { formatFilesize } from \"./format\";\n\nexport const validateFile = (file: File) => {\n  const errors = [];\n\n  if (!validFileTypes.includes(file.type)) {\n    errors.push(new Error(`Invalid File Type: '${file.type}'`));\n  }\n\n  if (file.size > maxFileSize) {\n    errors.push(new Error(`File size too large: ${formatFilesize(file.size)}`));\n  }\n\n  return errors.length > 0 ? errors : null;\n};\n","import { useCallback, useEffect, useReducer } from \"react\";\nimport * as service from \"./firebase\";\nimport { searchDebounce } from \"./constants\";\nimport { validateFile } from \"./validations\";\nimport { Document } from \"./models\";\nimport useDebouncedCallback from \"use-debounce/lib/useDebouncedCallback\";\n\ninterface State {\n  getting: boolean;\n  uploading: boolean;\n  deleting: Array<string>;\n  documents: Array<Document> | null;\n  errors: Array<Error>;\n}\n\ntype Action =\n  | { type: \"get-start\"; search: string }\n  | { type: \"get-error\"; error: Error }\n  | { type: \"get-success\"; documents: Array<Document> }\n  | { type: \"upload-start\"; }\n  | { type: \"upload-error\"; errors: Array<Error> }\n  | { type: \"upload-success\"; document: Document }\n  | { type: \"delete-start\"; documentName: string }\n  | { type: \"delete-error\"; documentName: string; error: Error }\n  | { type: \"delete-success\"; documentName: string }\n  | { type: \"clear-error\"; error: Error };\n\nconst initialState: State = {\n  getting: false,\n  uploading: false,\n  deleting: [],\n  documents: null,\n  errors: [],\n};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"get-start\":\n      return {\n        ...state,\n        getting: true,\n      };\n    case \"get-error\":\n      return {\n        ...state,\n        getting: false,\n        errors: [ ...state.errors, action.error],\n      };\n    case \"get-success\":\n      return {\n        ...state,\n        getting: false,\n        documents: action.documents,\n      };\n\n    case \"upload-start\":\n      return {\n        ...state,\n        uploading: true,\n      };\n    case \"upload-error\":\n      return {\n        ...state,\n        uploading: false,\n        errors: [...state.errors, ...action.errors],\n      };\n    case \"upload-success\":\n      return {\n        ...state,\n        uploading: false,\n        documents: [\n          ...(state.documents || []),\n          // Don't add duplicated documents\n          ...(state.documents?.find(x => x.name === action.document.name) ? [] : [action.document])\n        ],\n      };\n\n    case \"delete-start\":\n      return {\n        ...state,\n        deleting: [...state.deleting, action.documentName],\n      };\n    case \"delete-error\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        errors: [...state.errors, action.error],\n      };\n    case \"delete-success\":\n      return {\n        ...state,\n        deleting: state.deleting.filter((x) => x !== action.documentName),\n        documents: state.documents?.filter(\n          (x) => x.name !== action.documentName\n        ) ?? null,\n      };\n\n    case \"clear-error\":\n      return {\n        ...state,\n        errors: state.errors.filter((x) => x !== action.error),\n      };\n\n    default:\n      throw new Error(`Unknown action`);\n  }\n};\n\nexport const useDocuments = (search: string) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const getDocuments = useDebouncedCallback(async (search: string) => {\n    dispatch({ type: \"get-start\", search });\n    try {\n      const documents = await service.searchDocuments(search);\n      dispatch({ type: \"get-success\", documents })\n    } catch (error) {\n      dispatch({ type: \"get-error\", error })\n    }\n  }, searchDebounce);\n\n  const uploadDocument = useCallback(async (file: File) => {\n    dispatch({ type: \"upload-start\" });\n    try {\n      const validationErrors = validateFile(file);\n      if (validationErrors) throw validationErrors;\n      const document = await service.uploadDocument(file);\n      dispatch({ type: \"upload-success\", document })\n    } catch (e) {\n      const errors = Array.isArray(e) ? e : [e];\n      dispatch({ type: \"upload-error\", errors })\n    }\n  }, [dispatch]);\n\n  const deleteDocument = useCallback(async (documentName: string) => {\n    dispatch({ type: \"delete-start\", documentName });\n    try {\n      await service.deleteDocument(documentName);\n      dispatch({ type: \"delete-success\", documentName });\n    } catch (error) {\n      dispatch({ type: \"delete-error\", documentName, error });\n    }\n  }, [dispatch]);\n\n  const clearError = useCallback(\n    (error: Error) => dispatch({ type: \"clear-error\", error }),\n    [dispatch]\n  );\n\n  useEffect(() => {\n    getDocuments.callback(search);\n  }, [search, getDocuments]);\n\n  return {\n    state,\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  };\n};\n","import React, { useState } from \"react\";\nimport { Container, Grid, makeStyles } from \"@material-ui/core\";\n\nimport { DocumentList } from \"./list/DocumentList\";\nimport { ErrorAlerts } from \"./errors/ErrorAlerts\";\nimport { ErrorBoundary } from \"./errors/ErrorBoundary\";\nimport { ErrorPage } from \"./errors/ErrorPage\";\nimport { LoadingPage } from \"./loading/LoadingPage\";\nimport { SearchInput } from \"./search/SearchInput\";\nimport { UploadButton } from \"./upload/UploadButton\";\nimport { useDocuments } from \"./common/useDocuments\";\n\nconst useStyles = makeStyles((theme) => ({\n  app: {\n    padding: theme.spacing(2),\n    height: \"100vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  actions: {\n    marginBottom: theme.spacing(1),\n  },\n}));\n\nexport const App: React.FC = () => {\n  const classes = useStyles();\n  const [search, setSearch] = useState(\"\");\n  const {\n    state: { getting, uploading, deleting, documents, errors },\n    uploadDocument,\n    deleteDocument,\n    clearError,\n  } = useDocuments(search);\n\n  if (!documents && errors.length > 0) {\n    return <ErrorPage />;\n  } else if (!documents) {\n    return <LoadingPage />;\n  }\n\n  return (\n    <ErrorBoundary>\n      <ErrorAlerts errors={errors} clearError={clearError} />\n      <Container maxWidth=\"md\" className={classes.app}>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Grid item xs={12} md={2} className={classes.actions}>\n            <UploadButton\n              uploadDocument={uploadDocument}\n              uploading={uploading}\n            />\n          </Grid>\n          <Grid item xs={12} md={6} className={classes.actions}>\n            <SearchInput value={search} onChange={setSearch} getting={getting} />\n          </Grid>\n        </Grid>\n        <DocumentList\n          documents={documents ?? []}\n          deleting={deleting}\n          deleteDocument={deleteDocument}\n        />\n      </Container>\n    </ErrorBoundary>\n  );\n};\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./common/i18n\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}