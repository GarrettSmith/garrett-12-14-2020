(this["webpackJsonpgarrett-12-14-2020"]=this["webpackJsonpgarrett-12-14-2020"]||[]).push([[0],{68:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),i=n(18),o=n.n(i),s=(n(68),n(44)),u=n(35),l=n(46),d=n.n(l),p=["image/png","image/jpeg"],j=function(e){return d()(e).format("0.0b").toLowerCase()};s.a.use(u.e).init({resources:{en:{translation:{document:"{{count}} document",document_plural:"{{count}} documents",filesize:"{{filesize, filesize}}","total size":"Total size: {{totalSize, filesize}}",upload:"UPLOAD","upload error":"Failed to upload file!","upload success":"Successfully uploaded '{{ filename }}'!",delete:"Delete","search placeholder":"Search documents...","error title":"An error has occurred!",refresh:"Refresh"}}},lng:"en",keySeparator:!1,interpolation:{escapeValue:!1,format:function(e,t,n){switch(t){case"filesize":return j(e);default:return e}}}});s.a;var m=n(39),b=n(102),f=n(109),h=n(104),g=n(41),O=n(113),x=n(105),v=n(106),y=n(107),w=n(111),z=n(108),D=Object(b.a)((function(e){return{card:{height:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column"},actions:{display:"flex",justifyContent:"space-between",alignItems:"center"},filesize:{alignItems:"flex-end"}}})),N=function(e){var t=e.document,n=e.deleting,a=e.deleteDocument,c=Object(O.a)().t,i=D();return Object(r.jsx)(h.a,{className:"Document-Tile",item:!0,xs:12,md:4,children:Object(r.jsxs)(x.a,{className:i.card,variant:"outlined",children:[Object(r.jsx)(v.a,{title:t.name}),Object(r.jsxs)(y.a,{className:i.actions,children:[Object(r.jsx)(g.a,{className:i.filesize,children:c("filesize",{filesize:t.size})}),Object(r.jsx)(w.a,{className:"Delete-Button",size:"small",color:"primary",startIcon:n?Object(r.jsx)(z.a,{size:14}):null,disabled:n,onClick:function(){return a(t.name)},variant:"contained",children:c("delete")})]})]})})},k=Object(b.a)((function(e){return{totalSize:{display:"flex",alignItems:"flex-end"},header:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}}})),C=function(e){var t=e.documents,n=e.deleting,a=e.deleteDocument,c=Object(O.a)().t,i=k(),o=t.length,s=t.reduce((function(e,t){return e+t.size}),0),u=t.sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(h.a,{id:"Document-List-Header",className:i.header,container:!0,justify:"space-between",alignContent:"flex-end",children:[Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(g.a,{id:"Document-List-Header-Count",variant:"h3",variantMapping:{h3:"h1"},children:c("document",{count:o})})}),Object(r.jsx)(h.a,{item:!0,className:i.totalSize,children:Object(r.jsx)(g.a,{id:"Document-List-Header-Size",variant:"h5",children:c("total size",{totalSize:s})})})]}),Object(r.jsx)(h.a,{id:"Document-List-Documents",container:!0,spacing:2,children:u.map((function(e){return Object(r.jsx)(N,{document:e,deleting:n.includes(e.name),deleteDocument:a},e.name)}))})]})},I=n(110),E=function(e){var t=e.errors,n=e.clearError;return Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsx)(I.a,{className:"Document-Error",anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!0,message:e.message,autoHideDuration:1e4,onClose:function(){return n(e)}},e.message)}))})},S=n(54),F=n(55),A=n(58),T=n(57),L=Object(b.a)((function(e){return{page:{height:"100vh"}}})),P=function(){var e=Object(O.a)().t,t=L();return Object(r.jsxs)(h.a,{id:"Error-Page",className:t.page,container:!0,alignItems:"center",justify:"center",direction:"column",children:[Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(g.a,{variant:"h3",variantMapping:{h3:"h1"},children:e("error title")})}),Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){return window.location.reload()},children:e("refresh")})})]})},B=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(F.a)(n,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)(P,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(c.a.Component),R=Object(b.a)((function(e){return{loading:{height:"100vh"}}})),U=function(){var e=R();return Object(r.jsx)(h.a,{container:!0,justify:"center",alignItems:"center",className:e.loading,children:Object(r.jsx)(z.a,{})})},H=n(112),M=Object(b.a)((function(e){return{search:{borderRadius:e.shape.borderRadius,borderColor:e.palette.grey[400],borderWidth:1,borderStyle:"solid",display:"flex",flexDirection:"row",paddingRight:e.spacing(1)},inputRoot:{display:"flex",flexGrow:1},inputInput:{padding:e.spacing(1),display:"block"}}})),G=function(e){var t=e.value,n=e.onChange,a=e.getting,c=Object(O.a)().t,i=M();return Object(r.jsxs)("div",{className:i.search,children:[Object(r.jsx)(H.a,{id:"Document-Search",placeholder:c("search placeholder"),classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return n(e.target.value)},value:t}),a?Object(r.jsx)(z.a,{size:24}):null]})},J=Object(b.a)((function(e){return{button:{display:"flex",textAlign:"center"},input:{display:"none"}}})),W=function(e){var t=e.uploading,n=e.uploadDocument,a=Object(O.a)().t,c=J();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{id:"Upload-Input",className:c.input,accept:p.join(", "),type:"file",hidden:!0,onChange:function(e){var t,r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&n(r)}}),Object(r.jsx)("label",{htmlFor:"Upload-Input",children:Object(r.jsx)(w.a,{id:"Upload-Button",variant:"contained",className:c.button,component:"div",disabled:t,startIcon:t?Object(r.jsx)(z.a,{size:14}):null,color:"primary",children:a("Upload")})})]})},_=n(21),K=n.n(_),V=n(30),X=n(26),Z=n(9),q=n(43),Q=(n(81),n(82),q.a.initializeApp({apiKey:"AIzaSyA9eLEXFPMNIttFTlcZt6vImPOAaE9yPaA",authDomain:"garrett-12-14-2020.firebaseapp.com",projectId:"garrett-12-14-2020",storageBucket:"garrett-12-14-2020.appspot.com",messagingSenderId:"885719165107",appId:"1:885719165107:web:71a5aa03311777029fa8c6"})),Y=Q.storage().ref().child("documents"),$=Q.functions().httpsCallable("searchDocuments"),ee=function(){var e=Object(V.a)(K.a.mark((function e(t){var n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){return new Promise((function(t,n){Y.child(e.name).put(e).on(q.a.storage.TaskEvent.STATE_CHANGED,{error:n,complete:function(){return t({name:e.name,size:e.size})}})}))},ne=function(e){var t=[];return p.includes(e.type)||t.push(new Error("Invalid File Type: '".concat(e.type,"'"))),e.size>1e6&&t.push(new Error("File size too large: ".concat(j(e.size)))),t.length>0?t:null},re=n(56),ae=n.n(re),ce={getting:!1,uploading:!1,deleting:[],documents:null,errors:[]},ie=function(e,t){var n,r,a;switch(t.type){case"get-start":return Object(Z.a)(Object(Z.a)({},e),{},{getting:!0});case"get-error":return Object(Z.a)(Object(Z.a)({},e),{},{getting:!1,errors:[].concat(Object(X.a)(e.errors),[t.error])});case"get-success":return Object(Z.a)(Object(Z.a)({},e),{},{getting:!1,documents:t.documents});case"upload-start":return Object(Z.a)(Object(Z.a)({},e),{},{uploading:!0});case"upload-error":return Object(Z.a)(Object(Z.a)({},e),{},{uploading:!1,errors:[].concat(Object(X.a)(e.errors),Object(X.a)(t.errors))});case"upload-success":return Object(Z.a)(Object(Z.a)({},e),{},{uploading:!1,documents:[].concat(Object(X.a)(null!==(n=e.documents)&&void 0!==n?n:[]),[t.document])});case"delete-start":return Object(Z.a)(Object(Z.a)({},e),{},{deleting:[].concat(Object(X.a)(e.deleting),[t.documentName])});case"delete-error":return Object(Z.a)(Object(Z.a)({},e),{},{deleting:e.deleting.filter((function(e){return e!==t.documentName})),errors:[].concat(Object(X.a)(e.errors),[t.error])});case"delete-success":return Object(Z.a)(Object(Z.a)({},e),{},{deleting:e.deleting.filter((function(e){return e!==t.documentName})),documents:null!==(r=null===(a=e.documents)||void 0===a?void 0:a.filter((function(e){return e.name!==t.documentName})))&&void 0!==r?r:null});case"clear-error":return Object(Z.a)(Object(Z.a)({},e),{},{errors:e.errors.filter((function(e){return e===t.error}))});default:throw new Error("Unknown action")}},oe=Object(b.a)((function(e){return{app:{padding:e.spacing(2),height:"100vh",display:"flex",flexDirection:"column"},actions:{marginBottom:e.spacing(1)}}})),se=function(){var e=oe(),t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],i=n[1],o=function(e){var t=Object(a.useReducer)(ie,ce),n=Object(m.a)(t,2),r=n[0],c=n[1],i=ae()(function(){var e=Object(V.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"get-start",search:t}),e.prev=1,e.next=4,ee(t);case 4:n=e.sent,c({type:"get-success",documents:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"get-error",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),500),o=Object(a.useCallback)(function(){var e=Object(V.a)(K.a.mark((function e(t){var n,r,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c({type:"upload-start"}),e.prev=1,!(n=ne(t))){e.next=5;break}throw n;case 5:return e.next=7,te(t);case 7:r=e.sent,c({type:"upload-success",document:r}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),a=Array.isArray(e.t0)?e.t0:[e.t0],c({type:"upload-error",errors:a});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),[c]),s=Object(a.useCallback)(function(){var e=Object(V.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"delete-start",documentName:t}),e.prev=1,e.next=4,n=t,Y.child(n).delete();case 4:c({type:"delete-success",documentName:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c({type:"delete-error",documentName:t,error:e.t0});case 10:case"end":return e.stop()}var n}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[c]),u=Object(a.useCallback)((function(e){return c({type:"clear-error",error:e})}),[c]);return Object(a.useEffect)((function(){i.callback(e)}),[e,i]),{state:r,uploadDocument:o,deleteDocument:s,clearError:u}}(c),s=o.state,u=s.getting,l=s.uploading,d=s.deleting,p=s.documents,j=s.errors,b=o.uploadDocument,g=o.deleteDocument,O=o.clearError;return!p&&j.length>0?Object(r.jsx)(P,{}):p?Object(r.jsxs)(B,{children:[Object(r.jsx)(E,{errors:j,clearError:O}),Object(r.jsxs)(f.a,{maxWidth:"md",className:e.app,children:[Object(r.jsxs)(h.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(r.jsx)(h.a,{item:!0,xs:12,md:2,className:e.actions,children:Object(r.jsx)(W,{uploadDocument:b,uploading:l})}),Object(r.jsx)(h.a,{item:!0,xs:12,md:6,className:e.actions,children:Object(r.jsx)(G,{value:c,onChange:i,getting:u})})]}),Object(r.jsx)(C,{documents:null!==p&&void 0!==p?p:[],deleting:d,deleteDocument:g})]})]}):Object(r.jsx)(U,{})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(se,{}),document.getElementById("root")),ue()}},[[80,1,2]]]);
//# sourceMappingURL=main.404463ca.chunk.js.map